{"expireTime":9007200880805333000,"key":"transformer-remark-markdown-html-dbb545b38df716b25ab3a97fb83a397b-gatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<h2 id=\"ざっくり、「しろたん師匠」のご紹介？\">ざっくり、「しろたん師匠」のご紹介？</h2>\n<h3 id=\"しろたん師匠-インフラ屋さん\">しろたん師匠 /インフラ屋さん</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fe8931347690416c5ba6a4664d2c65df/e07e9/entry249-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB9mzNQakh2QZAf//EABsQAAICAwEAAAAAAAAAAAAAAAABAgMRFEEx/9oACAEBAAEFAlEwPJZCVhr2CZzj9//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAECBwEAAAAAAAAAAAAAAAABAgMQEiAxNEFx/9oACAEBAAY/ApdEpiKzw2XmbP/EABwQAAICAgMAAAAAAAAAAAAAAAABESEQMXHB0f/aAAgBAQABPyGi4GJH0cGnNPLGpS9GlFdli//aAAwDAQACAAMAAAAQEAgA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAIDAQADAAAAAAAAAAAAAQARITFBUWGB0f/aAAgBAQABPxDIUF2mn5hUZMc9gtYcoAS2j5qm72IiofR+wCJUAVpbW5doC2mUtBx5MFvb19qf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/fe8931347690416c5ba6a4664d2c65df/81b7c/entry249-1.webp 158w,\n/static/fe8931347690416c5ba6a4664d2c65df/ba381/entry249-1.webp 200w\"\n              sizes=\"(max-width: 200px) 100vw, 200px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/fe8931347690416c5ba6a4664d2c65df/ff44c/entry249-1.jpg 158w,\n/static/fe8931347690416c5ba6a4664d2c65df/e07e9/entry249-1.jpg 200w\"\n            sizes=\"(max-width: 200px) 100vw, 200px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/fe8931347690416c5ba6a4664d2c65df/e07e9/entry249-1.jpg\"\n            alt=\"しろたん師匠\"\n            title=\"しろたん師匠\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div class=\"box\">\n広島市内に生息。\n<p>ノーと言える大人ですが、口を一度開けば毒を吐くこともあります。\nインフラ、サーバーサイドだけでなくフロント周りまで幅広く手がけているようです。</p>\n<p>一見怖そうですがしろたんのようなラブリーキャラをこよなく愛しているみたいです。<br>\nテトリスがうまいです。</p>\n<p>嫁がイケてます。</p>\n</div>\n<h2 id=\"sqlってほんま大切やん\">SQLってほんま大切やん</h2>\n<p>最近ちょっとデータベースやサーバーのスペックを本来考えないといけない複雑な案件しました。\n本日たまたま仕事帰りに会社の近所で会社を経営しているしろたん師匠にエンカウントしてしまいました。\n一見怖そうですがしろたんのようなラブリーキャラをこよなく愛しているみたいです。<br>\nメモリやデータベースについて思いの丈をぶつけてみました。</p>\n<p>まずはSQL知っとかんといけんじゃろう。</p>\n<p>SQL上何がどう動いているのが分かってるのかい？\n何がどう処理されてるかによってサーバーへの負荷が違うんだぜ。</p>\n<p>とりあえず、そこ覗いてみようぜっちゅうことで。。。。SQL入門的なコマンド覚えたのでメモしておきます。</p>\n<h2 id=\"まずは、コマンドからデータベースをみてみよう\">まずは、コマンドからデータベースをみてみよう</h2>\n<p>とりあえず、サーバーに入りましょう!!!</p>\n<p>今回はvagrantで作ったサーバーの中を参考にみてみます。<br>\nvagrant sshで接続します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ mysql -u【ユーザー名】 -p【パスワード】</code></pre></div>\n<p>ワンラインでかけますのでユーザー名がuserパスワードがpasswordの場合はこんな感じで続けて書けます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ mysql -uuser -ppassword</code></pre></div>\n<p>MySQLに接続できるようになりました。\nデータベースのあれこれがわかるのでまずはコマンドshow databasesを叩いてみましょう。\n終端に必ず;(セミコロン)が要ります。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql <span class=\"token operator\">></span> <span class=\"token keyword\">show</span> <span class=\"token keyword\">databases</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>今度はデータベースのテーブルを確認していきます。</p>\n<p>どのデータベースを使用するか選び、中身を見てみましょう！</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/94e235f283e4a2d7a5266b51a19ca25c/b4294/entry249-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.13924050632912%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABiU5tI1AMDWDUA//EABgQAAMBAQAAAAAAAAAAAAAAAAAFNEEQ/9oACAEBAAEFAsW0GLaOLaD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAXEAADAQAAAAAAAAAAAAAAAAABEHIA/9oACAEBAAY/AsZZlmV//8QAHRAAAQQCAwAAAAAAAAAAAAAAAQAQEbEhUUFxof/aAAgBAQABPyHAkintWGO60eVh/QsN/9oADAMBAAIAAwAAABAADwD/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEQITFRgf/aAAgBAQABPxBAPfyXKg8sCA0UrhGNVDEO9PIKxx//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/94e235f283e4a2d7a5266b51a19ca25c/81b7c/entry249-2.webp 158w,\n/static/94e235f283e4a2d7a5266b51a19ca25c/6ea66/entry249-2.webp 315w,\n/static/94e235f283e4a2d7a5266b51a19ca25c/e88ff/entry249-2.webp 600w\"\n              sizes=\"(max-width: 600px) 100vw, 600px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/94e235f283e4a2d7a5266b51a19ca25c/ff44c/entry249-2.jpg 158w,\n/static/94e235f283e4a2d7a5266b51a19ca25c/a6688/entry249-2.jpg 315w,\n/static/94e235f283e4a2d7a5266b51a19ca25c/b4294/entry249-2.jpg 600w\"\n            sizes=\"(max-width: 600px) 100vw, 600px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/94e235f283e4a2d7a5266b51a19ca25c/b4294/entry249-2.jpg\"\n            alt=\"どのデータベースを使用するか選び、中身を見てみましょう\"\n            title=\"どのデータベースを使用するか選び、中身を見てみましょう\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">//データベースを選ぶ</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">use</span> 【データベース名】<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//例</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">use</span> mydatabase<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//中身を見る</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">show</span> <span class=\"token keyword\">tables</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>select * from【テーブル名】でそのテーブルの全てのデータが見ることができます。</p>\n<p>例えば、wordpressのwp_usersの中身を見て見たければこんな感じ。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f099751d9bf473bbf49281c9fb18cefb/2aa89/entry249-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.822784810126581%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdUlEQVQI103OSw4DIQwD0FFHSckHYhLo/Y9aDd30rSzZC1+ZE8CcGRHuPv+IyBgjgDGGu/Ob7/smYiJ6HZeZVS1gRgSAiJGZe3+qSlV770CIyBk8PRBrPfvW2gWgqjJz7dW7t0NVzczdf8HM6FBVZhKR5wjzF1u2COi7nsUQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f099751d9bf473bbf49281c9fb18cefb/81b7c/entry249-3.webp 158w,\n/static/f099751d9bf473bbf49281c9fb18cefb/6ea66/entry249-3.webp 315w,\n/static/f099751d9bf473bbf49281c9fb18cefb/8aab1/entry249-3.webp 630w,\n/static/f099751d9bf473bbf49281c9fb18cefb/a70f5/entry249-3.webp 945w,\n/static/f099751d9bf473bbf49281c9fb18cefb/4ef06/entry249-3.webp 1260w,\n/static/f099751d9bf473bbf49281c9fb18cefb/16258/entry249-3.webp 1698w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f099751d9bf473bbf49281c9fb18cefb/c26ae/entry249-3.png 158w,\n/static/f099751d9bf473bbf49281c9fb18cefb/6bdcf/entry249-3.png 315w,\n/static/f099751d9bf473bbf49281c9fb18cefb/f058b/entry249-3.png 630w,\n/static/f099751d9bf473bbf49281c9fb18cefb/40601/entry249-3.png 945w,\n/static/f099751d9bf473bbf49281c9fb18cefb/78612/entry249-3.png 1260w,\n/static/f099751d9bf473bbf49281c9fb18cefb/2aa89/entry249-3.png 1698w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f099751d9bf473bbf49281c9fb18cefb/f058b/entry249-3.png\"\n            alt=\"wordpressのwp_usersの中\"\n            title=\"wordpressのwp_usersの中\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">//テーブルの中を見る</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> 【テーブル名】<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//例</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> wp_users<span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7a9562a733b06c72a9d40674db74f86/e5166/entry249-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.62025316455696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABwqAkB//EABYQAQEBAAAAAAAAAAAAAAAAAAAEM//aAAgBAQABBQJRu//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAADEHL/2gAIAQEABj8CGan/xAAZEAACAwEAAAAAAAAAAAAAAAAAQQERMZH/2gAIAQEAAT8hesn2Fn//2gAMAwEAAgADAAAAEAPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAMUFR8P/aAAgBAQABPxANS1MwnLcbZn//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b7a9562a733b06c72a9d40674db74f86/81b7c/entry249-4.webp 158w,\n/static/b7a9562a733b06c72a9d40674db74f86/6ea66/entry249-4.webp 315w,\n/static/b7a9562a733b06c72a9d40674db74f86/8aab1/entry249-4.webp 630w,\n/static/b7a9562a733b06c72a9d40674db74f86/a70f5/entry249-4.webp 945w,\n/static/b7a9562a733b06c72a9d40674db74f86/92f8c/entry249-4.webp 1200w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b7a9562a733b06c72a9d40674db74f86/ff44c/entry249-4.jpg 158w,\n/static/b7a9562a733b06c72a9d40674db74f86/a6688/entry249-4.jpg 315w,\n/static/b7a9562a733b06c72a9d40674db74f86/828fb/entry249-4.jpg 630w,\n/static/b7a9562a733b06c72a9d40674db74f86/0ede0/entry249-4.jpg 945w,\n/static/b7a9562a733b06c72a9d40674db74f86/e5166/entry249-4.jpg 1200w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b7a9562a733b06c72a9d40674db74f86/828fb/entry249-4.jpg\"\n            alt=\"wordpressのwp_usersの中\"\n            title=\"wordpressのwp_usersの中\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">//データベースを選ぶ</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">select</span> 【カラム名】 <span class=\"token keyword\">from</span> 【データベース名】<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//例</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">select</span> ID <span class=\"token keyword\">from</span> wp_users<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//複数指定するときはカンマで区切る</span>\nmysql <span class=\"token operator\">></span> <span class=\"token keyword\">select</span> ID<span class=\"token punctuation\">,</span>user_nicename <span class=\"token keyword\">from</span> wp_users<span class=\"token punctuation\">;</span></code></pre></div>\n<p>また、カラム数が多すぎて見にくい場合は、縦並びに変えることもできます。<br>\n最後に\\G(バックスラッシュラージg)を付与するだけ。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e5a09eeb0d89ca39174905fdfac19a5e/4b190/entry249-5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.645569620253163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABh2g0QP/EABcQAAMBAAAAAAAAAAAAAAAAAAAFMkH/2gAIAQEAAQUCxXR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAMQgf/aAAgBAQAGPwIZk//EABkQAAEFAAAAAAAAAAAAAAAAAAEAECGhwf/aAAgBAQABPyEwCoab/9oADAMBAAIAAwAAABAAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAICAwAAAAAAAAAAAAAAAAERACEQYfD/2gAIAQEAAT8Quiy9w33Xh//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e5a09eeb0d89ca39174905fdfac19a5e/81b7c/entry249-5.webp 158w,\n/static/e5a09eeb0d89ca39174905fdfac19a5e/6ea66/entry249-5.webp 315w,\n/static/e5a09eeb0d89ca39174905fdfac19a5e/8aab1/entry249-5.webp 630w,\n/static/e5a09eeb0d89ca39174905fdfac19a5e/d00b9/entry249-5.webp 800w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e5a09eeb0d89ca39174905fdfac19a5e/ff44c/entry249-5.jpg 158w,\n/static/e5a09eeb0d89ca39174905fdfac19a5e/a6688/entry249-5.jpg 315w,\n/static/e5a09eeb0d89ca39174905fdfac19a5e/828fb/entry249-5.jpg 630w,\n/static/e5a09eeb0d89ca39174905fdfac19a5e/4b190/entry249-5.jpg 800w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e5a09eeb0d89ca39174905fdfac19a5e/828fb/entry249-5.jpg\"\n            alt=\"wordpressのwp_usersの中\"\n            title=\"wordpressのwp_usersの中\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"explain-selectで出力してみた\">explain selectで出力してみた</h2>\n<p>とりあえず、早速教えてもらったexplain selectで出力する方法を教えてもらいました。</p>\n<p>explain selectを実行するとSQLの挙動や出力スピードを最適化するのに役立つそう。</p>\n<p>いつか役に立つはずなの、そのやり方もメモっておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql <span class=\"token operator\">></span> <span class=\"token keyword\">explain</span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> wp_posts<span class=\"token punctuation\">;</span></code></pre></div>\n<p>まずは上記コマンドで出力内容を見て見ましょう。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0ec6c6531f55aad25c2ca4354ba92bd2/133ae/entry249-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.62025316455696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkklEQVQI113NS47EMAgE0CRW4w9gMBjuf9RW3NIs5q0KlUpciEhEiDjG6GPMKUR03/d13Mdfvv4xM3fPzL23qM45M0JEzH2txcxEtFR5ThxDRFR1qZbnecdMFBEAwMyZ+dYisQMRW2vubm5mxszuzswi0nsvpbzjtZa7R0RmttYBKsAHAMoBtb73UaH+QinlOZ+/fUkJdzOwSCEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0ec6c6531f55aad25c2ca4354ba92bd2/81b7c/entry249-6.webp 158w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/6ea66/entry249-6.webp 315w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/8aab1/entry249-6.webp 630w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/a70f5/entry249-6.webp 945w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/4ef06/entry249-6.webp 1260w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/18291/entry249-6.webp 1424w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0ec6c6531f55aad25c2ca4354ba92bd2/c26ae/entry249-6.png 158w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/6bdcf/entry249-6.png 315w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/f058b/entry249-6.png 630w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/40601/entry249-6.png 945w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/78612/entry249-6.png 1260w,\n/static/0ec6c6531f55aad25c2ca4354ba92bd2/133ae/entry249-6.png 1424w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0ec6c6531f55aad25c2ca4354ba92bd2/f058b/entry249-6.png\"\n            alt=\"wordpressのwp_usersの中\"\n            title=\"wordpressのwp_usersの中\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"select_typeとid\">select_typeとid</h3>\n<p>別々のフィールドですがセットとして考えて良いみたいです。</p>\n<p>ちなみにクエリがJOINだけから構成される場合、select_typeはSIMPLEとなります。\n(MySQLが実行出来るJOINの種類はNested Look Join（NLJ）の一種類しかないそうです)</p>\n<blockquote>\n<h4 id=\"ネステッドループ結合とは？\">ネステッドループ結合とは？</h4>\n<p>ネステッドループ結合は最初にアクセスする表(外部表、駆動表とも呼ばれる)をフェッチし、そのフェッチしたデータと結合可能なデータを内部表から検索する処理をループして結合します。</p>\n</blockquote>\n<h3 id=\"サブクエリが絡むと次のselect_typeには次の5種類のうちいずれかが表示されるそう\">サブクエリが絡むと次のselect_typeには次の5種類のうちいずれかが表示されるそう</h3>\n<ul>\n<li>PRIMARY…外部クエリを示す</li>\n<li>SUBQUERY…相関関係のないサブクエリ</li>\n<li>DEPENDENT SUBQUERY…相関関係のあるサブクエリ</li>\n</ul>\n<p>U* NCACHEABLE SUBQUERY…実行する度に結果が変わる可能性のあるサブクエリ</p>\n<ul>\n<li>DERIVED…FROM句で用いられているサブクエリ</li>\n</ul>\n<p>table\nまんまテーブル名です。</p>\n<h3 id=\"type\">type</h3>\n<ul>\n<li>const … PRIMARY KEYまたはUNIQUEインデックスのルックアップによるアクセス。最速。</li>\n<li>eq _ ref…JOINにおいてPRIARY KEYまたはUNIQUE KEYが利用される時のアクセスタイプ。constと似ているがJOINで用いられるところが違う。</li>\n<li>ref … ユニーク（PRIMARY or UNIQUE）でないインデックスを使って等価検索（WHERE key = value）を行った時に使われるアクセスタイプ。</li>\n<li>range … インデックスを用いた範囲検索。</li>\n<li>index … フルインデックススキャン。インデックス全体をスキャンする必要があるのでとても遅い。</li>\n<li>ALL … フルテーブルスキャン。インデックスがまったく利用されていないことを示す。OLTP系の処理では改善必須。</li>\n</ul>\n<h3 id=\"possible_keys\">possible_keys</h3>\n<p>オプティマイザがテーブルのアクセスに利用可能なインデックスの候補として挙げたキーの一覧。</p>\n<h3 id=\"possible_keys-1\">possible_keys</h3>\n<p>オプティマイザによって選択されたキー。</p>\n<h3 id=\"key_len\">key_len</h3>\n<p>選択されたキーの長さ。</p>\n<h3 id=\"ref\">ref</h3>\n<p>検索条件で、keyと比較されている値やカラムの種類。定数が指定されている場合はconstと表示される。JOINが実行されている時には、結合する相手側のテーブルで検索条件として利用されているカラムが表示される。</p>\n<h3 id=\"rows\">rows</h3>\n<p>そのテーブルからフェッチされる行数。実際の行数とは違うことがあるので注意が必要。</p>\n<p>whereでpost_parentの値を絞ってみます。<br>\nそうするとtypeがref(where key = valueで検索された)になりpossible_keysとkeyがpost_parent、refがconstになりましたね。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b24365cd7649f2e55f7172cf60385806/a8a6f/entry249-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.72151898734177%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjklEQVQI1z3L2Q7DIAxEURrEEi84MWD4/y+t4qg9b1eaCcyMDwKA1kREmImIRAQRAaDWGn4+7p+hj7HW6qrXdRORTetjmNk0G6Mz83EciKiqrTVEZOb7ccF5hr12zpmZzUycqu69nzU3M/PpDQCIaGbvv9az1hJ672utOScAZldczjmlVF0pJcb4ZnLRfQFjNAr8vCGXigAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b24365cd7649f2e55f7172cf60385806/81b7c/entry249-7.webp 158w,\n/static/b24365cd7649f2e55f7172cf60385806/6ea66/entry249-7.webp 315w,\n/static/b24365cd7649f2e55f7172cf60385806/8aab1/entry249-7.webp 630w,\n/static/b24365cd7649f2e55f7172cf60385806/a70f5/entry249-7.webp 945w,\n/static/b24365cd7649f2e55f7172cf60385806/4ef06/entry249-7.webp 1260w,\n/static/b24365cd7649f2e55f7172cf60385806/dde0f/entry249-7.webp 1516w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b24365cd7649f2e55f7172cf60385806/c26ae/entry249-7.png 158w,\n/static/b24365cd7649f2e55f7172cf60385806/6bdcf/entry249-7.png 315w,\n/static/b24365cd7649f2e55f7172cf60385806/f058b/entry249-7.png 630w,\n/static/b24365cd7649f2e55f7172cf60385806/40601/entry249-7.png 945w,\n/static/b24365cd7649f2e55f7172cf60385806/78612/entry249-7.png 1260w,\n/static/b24365cd7649f2e55f7172cf60385806/a8a6f/entry249-7.png 1516w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b24365cd7649f2e55f7172cf60385806/f058b/entry249-7.png\"\n            alt=\"typeがref(where key = valueで検索された)になりpossible_keysとkeyがpost_parent、refがconstになる\"\n            title=\"typeがref(where key = valueで検索された)になりpossible_keysとkeyがpost_parent、refがconstになる\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>条件を二つでand検索にするとExtraのところにUsing whereが追加されます。<br>\nkeyはpost_parentを選択されてますね。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f099751d9bf473bbf49281c9fb18cefb/2aa89/entry249-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.822784810126581%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdUlEQVQI103OSw4DIQwD0FFHSckHYhLo/Y9aDd30rSzZC1+ZE8CcGRHuPv+IyBgjgDGGu/Ob7/smYiJ6HZeZVS1gRgSAiJGZe3+qSlV770CIyBk8PRBrPfvW2gWgqjJz7dW7t0NVzczdf8HM6FBVZhKR5wjzF1u2COi7nsUQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f099751d9bf473bbf49281c9fb18cefb/81b7c/entry249-8.webp 158w,\n/static/f099751d9bf473bbf49281c9fb18cefb/6ea66/entry249-8.webp 315w,\n/static/f099751d9bf473bbf49281c9fb18cefb/8aab1/entry249-8.webp 630w,\n/static/f099751d9bf473bbf49281c9fb18cefb/a70f5/entry249-8.webp 945w,\n/static/f099751d9bf473bbf49281c9fb18cefb/4ef06/entry249-8.webp 1260w,\n/static/f099751d9bf473bbf49281c9fb18cefb/16258/entry249-8.webp 1698w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f099751d9bf473bbf49281c9fb18cefb/c26ae/entry249-8.png 158w,\n/static/f099751d9bf473bbf49281c9fb18cefb/6bdcf/entry249-8.png 315w,\n/static/f099751d9bf473bbf49281c9fb18cefb/f058b/entry249-8.png 630w,\n/static/f099751d9bf473bbf49281c9fb18cefb/40601/entry249-8.png 945w,\n/static/f099751d9bf473bbf49281c9fb18cefb/78612/entry249-8.png 1260w,\n/static/f099751d9bf473bbf49281c9fb18cefb/2aa89/entry249-8.png 1698w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f099751d9bf473bbf49281c9fb18cefb/f058b/entry249-8.png\"\n            alt=\"条件を二つでand検索にするとExtraのところにUsing whereが追加\"\n            title=\"条件を二つでand検索にするとExtraのところにUsing whereが追加\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>次にor検索で実行してみますとこんな感じ。\ntypeがALLになりました。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/41503721ba12cc88c2ef37b2cece0995/5df5d/entry249-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.822784810126581%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdUlEQVQI1yXLWQ6EQAgFQGO3OOzw8P5nnRjrv46ZqarBdHdEAJgZzKAB4MfsHsAAUNX7puu6iGittc7zUNXMBGBm3S0i3VXdz/NExN7bzDIzIyPC3SOiu82MiA5VqarMZGYA7q6q7v6Gen1NVUXE3Zn5+yLyB3p1CXEHZRvuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/41503721ba12cc88c2ef37b2cece0995/81b7c/entry249-10.webp 158w,\n/static/41503721ba12cc88c2ef37b2cece0995/6ea66/entry249-10.webp 315w,\n/static/41503721ba12cc88c2ef37b2cece0995/8aab1/entry249-10.webp 630w,\n/static/41503721ba12cc88c2ef37b2cece0995/a70f5/entry249-10.webp 945w,\n/static/41503721ba12cc88c2ef37b2cece0995/4ef06/entry249-10.webp 1260w,\n/static/41503721ba12cc88c2ef37b2cece0995/c6231/entry249-10.webp 1572w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/41503721ba12cc88c2ef37b2cece0995/c26ae/entry249-10.png 158w,\n/static/41503721ba12cc88c2ef37b2cece0995/6bdcf/entry249-10.png 315w,\n/static/41503721ba12cc88c2ef37b2cece0995/f058b/entry249-10.png 630w,\n/static/41503721ba12cc88c2ef37b2cece0995/40601/entry249-10.png 945w,\n/static/41503721ba12cc88c2ef37b2cece0995/78612/entry249-10.png 1260w,\n/static/41503721ba12cc88c2ef37b2cece0995/5df5d/entry249-10.png 1572w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/41503721ba12cc88c2ef37b2cece0995/f058b/entry249-10.png\"\n            alt=\"typeがALLに\"\n            title=\"typeがALLに\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"どんなコマンドを叩いたか思い出せない時\">どんなコマンドを叩いたか思い出せない時</h2>\n<p>今回はざっと教えてもらいましたが、どんなコマンドを叩いたか忘れてしまって復習できない時があります。</p>\n<p>そんな時はhistoryコマンドでどんなコマンドを叩いたか探す方法も教えてもらいました。</p>\n<p>まず、ルートに戻ってls -alで隠しファイルを確認します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ls</span> -al</code></pre></div>\n<p>そうすると、.mysql_historyという隠しファイルが　確認できると思います。</p>\n<p>catコマンドで中身を見てみましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> .mysql_history</code></pre></div>\n<h2 id=\"とりあえずまとめ\">とりあえずまとめ</h2>\n<p>とりとめのない感じの中身になっちゃいましたが、とりあえずexplain selectで出力されるデータを解析(?)してクエリをチューニングするらしいのですが、しろたん師匠はどうクエリが動いているのかをみて欲しかったみたいです。</p>\n<p>私なりになんとなくあっちこっちから調べて情報を継ぎ接ぎしましたが、このクエリ実行がサーバーのスペック等に影響するのでSQLがどう動いてるのかぐらいはやっぱり知っておきたいですね。</p>\n<ul>\n<li><a href=\"http://nippondanji.blogspot.jp/2009/03/mysqlexplain.html\">MySQLのEXPLAINを徹底解説!! / 漢のコンピューター道</a></li>\n<li><a href=\"http://www.doppo1.net/oracle/tuning/nested-loop.html\">ネステッドループ結合とは? / Walking Alone</a></li>\n</ul>"}