{"expireTime":9007200880808500000,"key":"transformer-remark-markdown-ast-04cd59bdc5743dc15e096209c84214c4-gatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"text","value":"functions.phpにリサイズを登録","position":{"start":{"line":1,"column":4,"offset":3},"end":{"line":1,"column":25,"offset":24}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":25,"offset":24}},"data":{"id":"functionsphpにリサイズを登録","htmlAttributes":{"id":"functionsphpにリサイズを登録"},"hProperties":{"id":"functionsphpにリサイズを登録"}}},{"type":"paragraph","children":[{"type":"text","value":"画像のリサイズをできるようにするためにはまず、アイキャッチを有効にしなければいけません。","position":{"start":{"line":2,"column":1,"offset":25},"end":{"line":2,"column":45,"offset":69}}}],"position":{"start":{"line":2,"column":1,"offset":25},"end":{"line":2,"column":45,"offset":69}}},{"type":"paragraph","children":[{"type":"text","value":"functions.phpに以下コードを追記します。","position":{"start":{"line":4,"column":1,"offset":71},"end":{"line":4,"column":27,"offset":97}}}],"position":{"start":{"line":4,"column":1,"offset":71},"end":{"line":4,"column":27,"offset":97}}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">add_theme_support('post-thumbnails');//アイキャッチを有効にする</code></pre></div>","position":{"start":{"line":5,"column":1,"offset":98},"end":{"line":7,"column":4,"offset":157}}},{"type":"paragraph","children":[{"type":"text","value":"WordPressでは画像をアップロードしたときに、リサイズした画像を生成できます。","position":{"start":{"line":8,"column":1,"offset":158},"end":{"line":8,"column":43,"offset":200}}}],"position":{"start":{"line":8,"column":1,"offset":158},"end":{"line":8,"column":43,"offset":200}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"リサイズする画像の登録","position":{"start":{"line":10,"column":5,"offset":206},"end":{"line":10,"column":16,"offset":217}}}],"position":{"start":{"line":10,"column":1,"offset":202},"end":{"line":10,"column":16,"offset":217}},"data":{"id":"リサイズする画像の登録","htmlAttributes":{"id":"リサイズする画像の登録"},"hProperties":{"id":"リサイズする画像の登録"}}},{"type":"paragraph","children":[{"type":"text","value":"なので","position":{"start":{"line":11,"column":1,"offset":218},"end":{"line":11,"column":4,"offset":221}}},{"type":"html","value":"<code class=\"language-text\">add_image_size()</code>","position":{"start":{"line":11,"column":4,"offset":221},"end":{"line":11,"column":22,"offset":239}}},{"type":"text","value":"でリサイズする画像サイズを登録します。","position":{"start":{"line":11,"column":22,"offset":239},"end":{"line":11,"column":41,"offset":258}}}],"position":{"start":{"line":11,"column":1,"offset":218},"end":{"line":11,"column":41,"offset":258}}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">add_image_size( $name, $width, $height, $crop );</code>","position":{"start":{"line":13,"column":1,"offset":260},"end":{"line":13,"column":51,"offset":310}}}],"position":{"start":{"line":13,"column":1,"offset":260},"end":{"line":13,"column":51,"offset":310}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$name…新しい画像サイズの名前","position":{"start":{"line":15,"column":3,"offset":314},"end":{"line":15,"column":20,"offset":331}}}],"position":{"start":{"line":15,"column":3,"offset":314},"end":{"line":15,"column":20,"offset":331}}}],"position":{"start":{"line":15,"column":1,"offset":312},"end":{"line":15,"column":20,"offset":331}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$width…画像の幅（px）","position":{"start":{"line":16,"column":3,"offset":334},"end":{"line":16,"column":18,"offset":349}}}],"position":{"start":{"line":16,"column":3,"offset":334},"end":{"line":16,"column":18,"offset":349}}}],"position":{"start":{"line":16,"column":1,"offset":332},"end":{"line":16,"column":18,"offset":349}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$height…画像の高さ（px）","position":{"start":{"line":17,"column":3,"offset":352},"end":{"line":17,"column":20,"offset":369}}}],"position":{"start":{"line":17,"column":3,"offset":352},"end":{"line":17,"column":20,"offset":369}}}],"position":{"start":{"line":17,"column":1,"offset":350},"end":{"line":17,"column":20,"offset":369}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$crop…画像を切り抜くか否か(初期値はfalse)","position":{"start":{"line":18,"column":3,"offset":372},"end":{"line":18,"column":30,"offset":399}}}],"position":{"start":{"line":18,"column":3,"offset":372},"end":{"line":18,"column":30,"offset":399}}}],"position":{"start":{"line":18,"column":1,"offset":370},"end":{"line":18,"column":30,"offset":399}}}],"position":{"start":{"line":15,"column":1,"offset":312},"end":{"line":18,"column":30,"offset":399}}},{"type":"paragraph","children":[{"type":"text","value":"ただ、画像サイズ名に予約名があるのでそれ以外で指定します。","position":{"start":{"line":20,"column":1,"offset":401},"end":{"line":20,"column":30,"offset":430}}}],"position":{"start":{"line":20,"column":1,"offset":401},"end":{"line":20,"column":30,"offset":430}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"thumb","position":{"start":{"line":22,"column":3,"offset":434},"end":{"line":22,"column":8,"offset":439}}}],"position":{"start":{"line":22,"column":3,"offset":434},"end":{"line":22,"column":8,"offset":439}}}],"position":{"start":{"line":22,"column":1,"offset":432},"end":{"line":22,"column":8,"offset":439}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"thumbnail","position":{"start":{"line":23,"column":3,"offset":442},"end":{"line":23,"column":12,"offset":451}}}],"position":{"start":{"line":23,"column":3,"offset":442},"end":{"line":23,"column":12,"offset":451}}}],"position":{"start":{"line":23,"column":1,"offset":440},"end":{"line":23,"column":12,"offset":451}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"medium","position":{"start":{"line":24,"column":3,"offset":454},"end":{"line":24,"column":9,"offset":460}}}],"position":{"start":{"line":24,"column":3,"offset":454},"end":{"line":24,"column":9,"offset":460}}}],"position":{"start":{"line":24,"column":1,"offset":452},"end":{"line":24,"column":9,"offset":460}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"large","position":{"start":{"line":25,"column":3,"offset":463},"end":{"line":25,"column":8,"offset":468}}}],"position":{"start":{"line":25,"column":3,"offset":463},"end":{"line":25,"column":8,"offset":468}}}],"position":{"start":{"line":25,"column":1,"offset":461},"end":{"line":25,"column":8,"offset":468}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"post-thumbnail","position":{"start":{"line":26,"column":3,"offset":471},"end":{"line":26,"column":17,"offset":485}}}],"position":{"start":{"line":26,"column":3,"offset":471},"end":{"line":26,"column":17,"offset":485}}}],"position":{"start":{"line":26,"column":1,"offset":469},"end":{"line":26,"column":17,"offset":485}}}],"position":{"start":{"line":22,"column":1,"offset":432},"end":{"line":26,"column":17,"offset":485}}},{"type":"paragraph","children":[{"type":"text","value":"ということで、「newResizeImage」という名前で画像サイズを作るとするとこんな感じになります。","position":{"start":{"line":28,"column":1,"offset":487},"end":{"line":28,"column":53,"offset":539}}}],"position":{"start":{"line":28,"column":1,"offset":487},"end":{"line":28,"column":53,"offset":539}}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">get_post_meta($post->ID, 'customImage', true);</code></pre></div>","position":{"start":{"line":30,"column":1,"offset":541},"end":{"line":32,"column":4,"offset":595}}},{"type":"heading","depth":3,"children":[{"type":"text","value":"カスタムフィールドの画像情報を取得","position":{"start":{"line":34,"column":5,"offset":601},"end":{"line":34,"column":22,"offset":618}}}],"position":{"start":{"line":34,"column":1,"offset":597},"end":{"line":34,"column":22,"offset":618}},"data":{"id":"カスタムフィールドの画像情報を取得","htmlAttributes":{"id":"カスタムフィールドの画像情報を取得"},"hProperties":{"id":"カスタムフィールドの画像情報を取得"}}},{"type":"paragraph","children":[{"type":"text","value":"出力したいカスタムフィールドの画像情報を取得します。","position":{"start":{"line":35,"column":1,"offset":619},"end":{"line":35,"column":27,"offset":645}}}],"position":{"start":{"line":35,"column":1,"offset":619},"end":{"line":35,"column":27,"offset":645}}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">get_post_meta($post_id, $key, $single);</code>","position":{"start":{"line":37,"column":1,"offset":647},"end":{"line":37,"column":42,"offset":688}}}],"position":{"start":{"line":37,"column":1,"offset":647},"end":{"line":37,"column":42,"offset":688}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$post_id…カスタムフィールドを取得したい投稿のID","position":{"start":{"line":39,"column":3,"offset":692},"end":{"line":39,"column":32,"offset":721}}}],"position":{"start":{"line":39,"column":3,"offset":692},"end":{"line":39,"column":32,"offset":721}}}],"position":{"start":{"line":39,"column":1,"offset":690},"end":{"line":39,"column":32,"offset":721}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$key…取得したい値のキー名の文字列。オプションで初期値はnull","position":{"start":{"line":40,"column":3,"offset":724},"end":{"line":40,"column":37,"offset":758}}}],"position":{"start":{"line":40,"column":3,"offset":724},"end":{"line":40,"column":37,"offset":758}}}],"position":{"start":{"line":40,"column":1,"offset":722},"end":{"line":40,"column":37,"offset":758}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"$single…初期値はfalse。falseでカスタムフィールドの配列を返す。true をセットした場合、文字列として単一の結果を返す。","position":{"start":{"line":41,"column":3,"offset":761},"end":{"line":41,"column":72,"offset":830}}}],"position":{"start":{"line":41,"column":3,"offset":761},"end":{"line":41,"column":72,"offset":830}}}],"position":{"start":{"line":41,"column":1,"offset":759},"end":{"line":41,"column":72,"offset":830}}}],"position":{"start":{"line":39,"column":1,"offset":690},"end":{"line":41,"column":72,"offset":830}}},{"type":"paragraph","children":[{"type":"text","value":"わざわざ配列にする必要はないのでtrueをセット。\nIDは時と場合によるのでですが、whileなどで回してなりして取得します。今回は割愛します。","position":{"start":{"line":43,"column":1,"offset":832},"end":{"line":44,"column":47,"offset":904}}}],"position":{"start":{"line":43,"column":1,"offset":832},"end":{"line":44,"column":47,"offset":904}}},{"type":"paragraph","children":[{"type":"text","value":"あとは画像を","position":{"start":{"line":46,"column":1,"offset":906},"end":{"line":46,"column":7,"offset":912}}},{"type":"html","value":"<code class=\"language-text\">wp_get_attachment_image_src()</code>","position":{"start":{"line":46,"column":7,"offset":912},"end":{"line":46,"column":38,"offset":943}}},{"type":"text","value":"で画像情報を取得します。","position":{"start":{"line":46,"column":38,"offset":943},"end":{"line":46,"column":50,"offset":955}}}],"position":{"start":{"line":46,"column":1,"offset":906},"end":{"line":46,"column":50,"offset":955}}},{"type":"paragraph","children":[{"type":"text","value":"取得できる値は配列で以下のようになってます。","position":{"start":{"line":48,"column":1,"offset":957},"end":{"line":48,"column":23,"offset":979}}}],"position":{"start":{"line":48,"column":1,"offset":957},"end":{"line":48,"column":23,"offset":979}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"[0] => url","position":{"start":{"line":50,"column":3,"offset":983},"end":{"line":50,"column":13,"offset":993}}}],"position":{"start":{"line":50,"column":3,"offset":983},"end":{"line":50,"column":13,"offset":993}}}],"position":{"start":{"line":50,"column":1,"offset":981},"end":{"line":50,"column":13,"offset":993}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"[1] => width","position":{"start":{"line":51,"column":3,"offset":996},"end":{"line":51,"column":15,"offset":1008}}}],"position":{"start":{"line":51,"column":3,"offset":996},"end":{"line":51,"column":15,"offset":1008}}}],"position":{"start":{"line":51,"column":1,"offset":994},"end":{"line":51,"column":15,"offset":1008}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"[2] => height","position":{"start":{"line":52,"column":3,"offset":1011},"end":{"line":52,"column":16,"offset":1024}}}],"position":{"start":{"line":52,"column":3,"offset":1011},"end":{"line":52,"column":16,"offset":1024}}}],"position":{"start":{"line":52,"column":1,"offset":1009},"end":{"line":52,"column":16,"offset":1024}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"[3] => 真偽値: リサイズされいている場合は true、元のサイズの場合は false","position":{"start":{"line":53,"column":3,"offset":1027},"end":{"line":53,"column":49,"offset":1073}}}],"position":{"start":{"line":53,"column":3,"offset":1027},"end":{"line":53,"column":49,"offset":1073}}}],"position":{"start":{"line":53,"column":1,"offset":1025},"end":{"line":53,"column":49,"offset":1073}}}],"position":{"start":{"line":50,"column":1,"offset":981},"end":{"line":53,"column":49,"offset":1073}}},{"type":"paragraph","children":[{"type":"text","value":"なのでパスを取得してimgタグなどに出力したい時は以下のような感じになります。","position":{"start":{"line":55,"column":1,"offset":1075},"end":{"line":55,"column":40,"offset":1114}}}],"position":{"start":{"line":55,"column":1,"offset":1075},"end":{"line":55,"column":40,"offset":1114}}},{"type":"html","lang":"php","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$imagepath</span> <span class=\"token operator\">=</span> <span class=\"token function\">wp_get_attachment_image_src</span><span class=\"token punctuation\">(</span><span class=\"token function\">get_post_meta</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-></span><span class=\"token constant\">ID</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'photo1'</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'newResizeImage'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'&lt;img src=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$imagepath</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" width=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$imagepath</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\" height=\"'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$imagepath</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\">'</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":56,"column":1,"offset":1115},"end":{"line":59,"column":4,"offset":1328}}},{"type":"paragraph","children":[{"type":"text","value":"パスだけ取得できたら、JSなどにも応用できて便利です。","position":{"start":{"line":60,"column":1,"offset":1329},"end":{"line":60,"column":28,"offset":1356}}}],"position":{"start":{"line":60,"column":1,"offset":1329},"end":{"line":60,"column":28,"offset":1356}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":61,"column":1,"offset":1357}}}}