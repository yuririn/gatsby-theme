{"expireTime":9007200880805334000,"key":"transformer-remark-markdown-html-ast-8e2a626ed3efd91ad8461b9cf308564d-gatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"mysqlのアップグレード"},"children":[{"type":"text","value":"MySQLのアップグレード","position":{"start":{"line":1,"column":4,"offset":3},"end":{"line":1,"column":17,"offset":16}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":17,"offset":16}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"バックのことはさほど分かっていないくせに、Vagrant を構築してしょっ中作っては壊しています。","position":{"start":{"line":2,"column":1,"offset":17},"end":{"line":2,"column":50,"offset":66}}}],"position":{"start":{"line":2,"column":1,"offset":17},"end":{"line":2,"column":50,"offset":66}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"もっぱら Vagrant の構築はいただきもののシェルスクリプトを使いまわしてます。めちゃめちゃ重宝していて、たまに改変してます。","position":{"start":{"line":4,"column":1,"offset":68},"end":{"line":4,"column":66,"offset":133}}}],"position":{"start":{"line":4,"column":1,"offset":68},"end":{"line":4,"column":66,"offset":133}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ちょっと前に作成したサイトを最近リニューアルする必要があり、本番環境のMySQL の 5.7系だったので、仮想環境も念のため 5.7にしなければならず。。。","position":{"start":{"line":6,"column":1,"offset":135},"end":{"line":6,"column":79,"offset":213}}}],"position":{"start":{"line":6,"column":1,"offset":135},"end":{"line":6,"column":79,"offset":213}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"しかしいただいたシェルスクリプトは 5.1 系で書いてあるし、インストールの仕方が違うらしくシェルスクリプトを改造する自信はなく。。。。","position":{"start":{"line":8,"column":1,"offset":215},"end":{"line":8,"column":69,"offset":283}}}],"position":{"start":{"line":8,"column":1,"offset":215},"end":{"line":8,"column":69,"offset":283}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"一応改造は試みましたがうまく行かず撃沈。いったん構築してしまってアップグレードすることにしました。","position":{"start":{"line":10,"column":1,"offset":285},"end":{"line":10,"column":50,"offset":334}}}],"position":{"start":{"line":10,"column":1,"offset":285},"end":{"line":10,"column":50,"offset":334}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"mysql-51-から-57-に-アップグレードするには2段階のステップを踏まなければならない"},"children":[{"type":"text","value":"MySQL 5.1 から 5.7 に アップグレードするには2段階のステップを踏まなければならない","position":{"start":{"line":12,"column":4,"offset":339},"end":{"line":12,"column":53,"offset":388}}}],"position":{"start":{"line":12,"column":1,"offset":336},"end":{"line":12,"column":53,"offset":388}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ワタクシの環境はちなみに CentOS 6.4 です。","position":{"start":{"line":13,"column":1,"offset":389},"end":{"line":13,"column":28,"offset":416}}}],"position":{"start":{"line":13,"column":1,"offset":389},"end":{"line":13,"column":28,"offset":416}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"MySQL 5.1 が古いのか、バージョンアップするためにはまず、5.6系にあげなければならないそう。","position":{"start":{"line":15,"column":1,"offset":418},"end":{"line":15,"column":52,"offset":469}}}],"position":{"start":{"line":15,"column":1,"offset":418},"end":{"line":15,"column":52,"offset":469}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"こちらのブログを参考にさせていただきました。","position":{"start":{"line":17,"column":1,"offset":471},"end":{"line":17,"column":23,"offset":493}}}],"position":{"start":{"line":17,"column":1,"offset":471},"end":{"line":17,"column":23,"offset":493}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://qiita.com/tachitechi/items/b59278a16f636651410f"},"children":[{"type":"text","value":"MySQL5.1から5.7にバージョンアップさせるための手順","position":{"start":{"line":19,"column":2,"offset":496},"end":{"line":19,"column":32,"offset":526}}}],"position":{"start":{"line":19,"column":1,"offset":495},"end":{"line":19,"column":90,"offset":584}}}],"position":{"start":{"line":19,"column":1,"offset":495},"end":{"line":19,"column":90,"offset":584}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"まずは-56-系へアップグレード"},"children":[{"type":"text","value":"まずは 5.6 系へアップグレード","position":{"start":{"line":20,"column":4,"offset":588},"end":{"line":20,"column":21,"offset":605}}}],"position":{"start":{"line":20,"column":1,"offset":585},"end":{"line":20,"column":21,"offset":605}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"vagrant sshで入り、まずはバージョン確認。","position":{"start":{"line":21,"column":1,"offset":606},"end":{"line":21,"column":27,"offset":632}}}],"position":{"start":{"line":21,"column":1,"offset":606},"end":{"line":21,"column":27,"offset":632}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># vagrant ssh</span></code></pre></div>","position":{"start":{"line":23,"column":1,"offset":634},"end":{"line":25,"column":4,"offset":659}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"特権レベルにセット。","position":{"start":{"line":26,"column":1,"offset":660},"end":{"line":26,"column":11,"offset":670}}}],"position":{"start":{"line":26,"column":1,"offset":660},"end":{"line":26,"column":11,"offset":670}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># sudo -i</span></code></pre></div>","position":{"start":{"line":28,"column":1,"offset":672},"end":{"line":30,"column":4,"offset":693}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"まずはmysqlをシャットダウン。","position":{"start":{"line":31,"column":1,"offset":694},"end":{"line":31,"column":18,"offset":711}}}],"position":{"start":{"line":31,"column":1,"offset":694},"end":{"line":31,"column":18,"offset":711}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># service mysqld stop</span></code></pre></div>","position":{"start":{"line":32,"column":1,"offset":712},"end":{"line":34,"column":4,"offset":745}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"既存のmysqlを削除","position":{"start":{"line":35,"column":1,"offset":746},"end":{"line":35,"column":12,"offset":757}}}],"position":{"start":{"line":35,"column":1,"offset":746},"end":{"line":35,"column":12,"offset":757}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum remove mysql*</span></code></pre></div>","position":{"start":{"line":36,"column":1,"offset":758},"end":{"line":38,"column":4,"offset":789}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum -y install http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm</span></code></pre></div>","position":{"start":{"line":40,"column":1,"offset":791},"end":{"line":42,"column":4,"offset":885}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"落ちてこない人は直接、ルートにmysql-community-release-el6-5.noarch.rpmを置いて yum install すればいいと思う。","position":{"start":{"line":43,"column":1,"offset":886},"end":{"line":43,"column":82,"offset":967}}}],"position":{"start":{"line":43,"column":1,"offset":886},"end":{"line":43,"column":82,"offset":967}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /vagrant\n<span class=\"token comment\"># yum -y install mysql-community-release-el6-5.noarch.rpm</span></code></pre></div>","position":{"start":{"line":45,"column":1,"offset":969},"end":{"line":48,"column":4,"offset":1050}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum-config-manager --disable mysql55-community</span>\n<span class=\"token comment\"># yum-config-manager --enable mysql56-community</span></code></pre></div>","position":{"start":{"line":49,"column":1,"offset":1051},"end":{"line":52,"column":4,"offset":1159}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"yum-config-managerでエラーになる人は以下コマンドを実行して、上のコマンドをもう一度叩いてみてください。","position":{"start":{"line":54,"column":1,"offset":1161},"end":{"line":54,"column":61,"offset":1221}}}],"position":{"start":{"line":54,"column":1,"offset":1161},"end":{"line":54,"column":61,"offset":1221}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://akamist.com/blog/archives/942"},"children":[{"type":"text","value":"[yum]yum-config-managerコマンドの実行でcommand not foundエラー","position":{"start":{"line":56,"column":2,"offset":1224},"end":{"line":56,"column":53,"offset":1275}}}],"position":{"start":{"line":56,"column":1,"offset":1223},"end":{"line":56,"column":93,"offset":1315}}}],"position":{"start":{"line":56,"column":1,"offset":1223},"end":{"line":56,"column":93,"offset":1315}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum -y install yum-utils</span></code></pre></div>","position":{"start":{"line":58,"column":1,"offset":1317},"end":{"line":60,"column":4,"offset":1355}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"インストール。","position":{"start":{"line":61,"column":1,"offset":1356},"end":{"line":61,"column":8,"offset":1363}}}],"position":{"start":{"line":61,"column":1,"offset":1356},"end":{"line":61,"column":8,"offset":1363}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum install mysql mysql-devel mysql-server mysql-utilities</span></code></pre></div>","position":{"start":{"line":62,"column":1,"offset":1364},"end":{"line":64,"column":4,"offset":1436}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ここですでにDBがあるとおそらく mysqld が起動できないはずです。","position":{"start":{"line":65,"column":1,"offset":1437},"end":{"line":65,"column":37,"offset":1473}}}],"position":{"start":{"line":65,"column":1,"offset":1437},"end":{"line":65,"column":37,"offset":1473}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"なので、まずはログを確認してみます。","position":{"start":{"line":67,"column":1,"offset":1475},"end":{"line":67,"column":19,"offset":1493}}}],"position":{"start":{"line":67,"column":1,"offset":1475},"end":{"line":67,"column":19,"offset":1493}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># less /var/log/mysqld.log</span></code></pre></div>","position":{"start":{"line":68,"column":1,"offset":1494},"end":{"line":70,"column":4,"offset":1532}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Mac ではログファイルを開いたら shift + g で一番下まで行けます。","position":{"start":{"line":71,"column":1,"offset":1533},"end":{"line":71,"column":40,"offset":1572}}}],"position":{"start":{"line":71,"column":1,"offset":1533},"end":{"line":71,"column":40,"offset":1572}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">b</code>","position":{"start":{"line":73,"column":1,"offset":1574},"end":{"line":73,"column":4,"offset":1577}}},{"type":"text","value":" で1ページ戻り、space で次のページ、","position":{"start":{"line":73,"column":4,"offset":1577},"end":{"line":73,"column":26,"offset":1599}}},{"type":"raw","value":"<code class=\"language-text\">q</code>","position":{"start":{"line":73,"column":26,"offset":1599},"end":{"line":73,"column":29,"offset":1602}}},{"type":"text","value":" でログファイルを抜けることができます。","position":{"start":{"line":73,"column":29,"offset":1602},"end":{"line":73,"column":49,"offset":1622}}}],"position":{"start":{"line":73,"column":1,"offset":1574},"end":{"line":73,"column":49,"offset":1622}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"先に DB を作ってしまってたせいか、不要なファイルができていたのでこいつを削除しにいきます。","position":{"start":{"line":75,"column":1,"offset":1624},"end":{"line":75,"column":48,"offset":1671}}}],"position":{"start":{"line":75,"column":1,"offset":1624},"end":{"line":75,"column":48,"offset":1671}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ちゃんとした理由についてはこちらをご覧ください。","position":{"start":{"line":77,"column":1,"offset":1673},"end":{"line":77,"column":25,"offset":1697}}}],"position":{"start":{"line":77,"column":1,"offset":1673},"end":{"line":77,"column":25,"offset":1697}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.ilovex.co.jp/blog/system/projectandsystemdevelopment/mycnfinnodbmysql.html"},"children":[{"type":"text","value":"my.cnfでinnodb関連の設定後、MySQLが起動しなくなった","position":{"start":{"line":79,"column":2,"offset":1700},"end":{"line":79,"column":36,"offset":1734}}}],"position":{"start":{"line":79,"column":1,"offset":1699},"end":{"line":79,"column":125,"offset":1823}}}],"position":{"start":{"line":79,"column":1,"offset":1699},"end":{"line":79,"column":125,"offset":1823}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ディレクトリーを移動して中身を確認。","position":{"start":{"line":81,"column":1,"offset":1825},"end":{"line":81,"column":19,"offset":1843}}}],"position":{"start":{"line":81,"column":1,"offset":1825},"end":{"line":81,"column":19,"offset":1843}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># cd /var/lib/mysql</span>\n<span class=\"token comment\"># ls(もしくはll)</span></code></pre></div>","position":{"start":{"line":82,"column":1,"offset":1844},"end":{"line":85,"column":4,"offset":1888}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"下の三つが不要なので強制削除します。","position":{"start":{"line":87,"column":1,"offset":1890},"end":{"line":87,"column":19,"offset":1908}}},{"type":"raw","value":"<br>","position":{"start":{"line":87,"column":19,"offset":1908},"end":{"line":87,"column":23,"offset":1912}}},{"type":"text","value":"\n※もちろんエラー内容を確認の上削除。","position":{"start":{"line":87,"column":23,"offset":1912},"end":{"line":88,"column":19,"offset":1931}}}],"position":{"start":{"line":87,"column":1,"offset":1890},"end":{"line":88,"column":19,"offset":1931}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># rm -rf ib_logfile0</span>\n<span class=\"token comment\"># rm -rf ib_logfile1</span>\n<span class=\"token comment\"># rm -rf ibdata1</span></code></pre></div>","position":{"start":{"line":89,"column":1,"offset":1932},"end":{"line":93,"column":4,"offset":2002}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"fatal-error-cant-open-and-lock-privilege-tables-table-mysqluser-doesnt-existというエラーが出た場合"},"children":[{"type":"text","value":"Fatal error: Can’t open and lock privilege tables: Table ‘mysql.user’ doesn’t existというエラーが出た場合","position":{"start":{"line":94,"column":5,"offset":2007},"end":{"line":94,"column":99,"offset":2101}}}],"position":{"start":{"line":94,"column":1,"offset":2003},"end":{"line":94,"column":99,"offset":2101}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"インストール時に mysql_install_db が実行されるが、ディレクトリがわからない状態なので、インストール場所とユーザ名を指定して明示的に実行すると良いようです。","position":{"start":{"line":95,"column":1,"offset":2102},"end":{"line":95,"column":87,"offset":2188}}}],"position":{"start":{"line":95,"column":1,"offset":2102},"end":{"line":95,"column":87,"offset":2188}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># mysql_install_db --datadir=/var/lib/mysql --user=mysql</span></code></pre></div>","position":{"start":{"line":97,"column":1,"offset":2190},"end":{"line":99,"column":4,"offset":2258}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://satoh-d.hatenablog.com/entry/2015/04/11/100204"},"children":[{"type":"text","value":"MySQLの起動時に “Fatal error: Can’t open and lock privilege tables: Table ‘mysql.host’ doesn’t exist”というエラーが出た","position":{"start":{"line":100,"column":2,"offset":2260},"end":{"line":100,"column":107,"offset":2365}}}],"position":{"start":{"line":100,"column":1,"offset":2259},"end":{"line":100,"column":163,"offset":2421}}},{"type":"text","value":"\nこれで無事再起動できるはずです。","position":{"start":{"line":100,"column":163,"offset":2421},"end":{"line":101,"column":17,"offset":2438}}}],"position":{"start":{"line":100,"column":1,"offset":2259},"end":{"line":101,"column":17,"offset":2438}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># service mysqld start</span></code></pre></div>","position":{"start":{"line":102,"column":1,"offset":2439},"end":{"line":104,"column":4,"offset":2473}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"アップグレードします。","position":{"start":{"line":105,"column":1,"offset":2474},"end":{"line":105,"column":12,"offset":2485}}}],"position":{"start":{"line":105,"column":1,"offset":2474},"end":{"line":105,"column":12,"offset":2485}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># mysql_upgrade -u root</span></code></pre></div>","position":{"start":{"line":106,"column":1,"offset":2486},"end":{"line":108,"column":4,"offset":2521}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"パスワードを設定している場合はお尻に -p をつけてパスワード入力します。","position":{"start":{"line":109,"column":1,"offset":2522},"end":{"line":109,"column":38,"offset":2559}}}],"position":{"start":{"line":109,"column":1,"offset":2522},"end":{"line":109,"column":38,"offset":2559}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># mysql_upgrade -u root -p</span></code></pre></div>","position":{"start":{"line":110,"column":1,"offset":2560},"end":{"line":112,"column":4,"offset":2598}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"バージョン確認。","position":{"start":{"line":113,"column":1,"offset":2599},"end":{"line":113,"column":9,"offset":2607}}}],"position":{"start":{"line":113,"column":1,"offset":2599},"end":{"line":113,"column":9,"offset":2607}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># mysql --version</span></code></pre></div>","position":{"start":{"line":114,"column":1,"offset":2608},"end":{"line":116,"column":4,"offset":2637}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ようやく5.6系になりました。","position":{"start":{"line":117,"column":1,"offset":2638},"end":{"line":117,"column":16,"offset":2653}}}],"position":{"start":{"line":117,"column":1,"offset":2638},"end":{"line":117,"column":16,"offset":2653}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"57にアップグレード"},"children":[{"type":"text","value":"5.7にアップグレード","position":{"start":{"line":118,"column":4,"offset":2657},"end":{"line":118,"column":15,"offset":2668}}}],"position":{"start":{"line":118,"column":1,"offset":2654},"end":{"line":118,"column":15,"offset":2668}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"続けて、5.7 にアップグレードします。","position":{"start":{"line":119,"column":1,"offset":2669},"end":{"line":119,"column":21,"offset":2689}}}],"position":{"start":{"line":119,"column":1,"offset":2669},"end":{"line":119,"column":21,"offset":2689}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"まずはmysqlをシャットダウン。","position":{"start":{"line":121,"column":1,"offset":2691},"end":{"line":121,"column":18,"offset":2708}}}],"position":{"start":{"line":121,"column":1,"offset":2691},"end":{"line":121,"column":18,"offset":2708}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># service mysqld stop</span></code></pre></div>","position":{"start":{"line":122,"column":1,"offset":2709},"end":{"line":124,"column":4,"offset":2742}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"せっかく作ったけど、のmysqlを削除。","position":{"start":{"line":125,"column":1,"offset":2743},"end":{"line":125,"column":21,"offset":2763}}}],"position":{"start":{"line":125,"column":1,"offset":2743},"end":{"line":125,"column":21,"offset":2763}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum remove mysql*</span></code></pre></div>","position":{"start":{"line":126,"column":1,"offset":2764},"end":{"line":128,"column":4,"offset":2795}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"5.7を有効化","position":{"start":{"line":129,"column":1,"offset":2796},"end":{"line":129,"column":8,"offset":2803}}}],"position":{"start":{"line":129,"column":1,"offset":2796},"end":{"line":129,"column":8,"offset":2803}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum-config-manager --disable mysql56-community</span>\n<span class=\"token comment\"># yum-config-manager --enable mysql57-community-dmr</span></code></pre></div>","position":{"start":{"line":130,"column":1,"offset":2804},"end":{"line":133,"column":4,"offset":2916}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"インストール","position":{"start":{"line":134,"column":1,"offset":2917},"end":{"line":134,"column":7,"offset":2923}}}],"position":{"start":{"line":134,"column":1,"offset":2917},"end":{"line":134,"column":7,"offset":2923}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># yum install mysql mysql-devel mysql-server mysql-utilitie</span></code></pre></div>","position":{"start":{"line":135,"column":1,"offset":2924},"end":{"line":137,"column":4,"offset":2995}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># service mysqld start</span>\n<span class=\"token comment\"># mysql_upgrade -u root</span>\n//もしくは\n<span class=\"token comment\"># mysql_upgrade -u root -p</span></code></pre></div>","position":{"start":{"line":138,"column":1,"offset":2996},"end":{"line":143,"column":4,"offset":3088}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"無事アップグレードできているはずです。","position":{"start":{"line":144,"column":1,"offset":3089},"end":{"line":144,"column":20,"offset":3108}}}],"position":{"start":{"line":144,"column":1,"offset":3089},"end":{"line":144,"column":20,"offset":3108}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># mysql --version</span></code></pre></div>","position":{"start":{"line":145,"column":1,"offset":3109},"end":{"line":147,"column":4,"offset":3138}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"まとめ"},"children":[{"type":"text","value":"まとめ","position":{"start":{"line":148,"column":5,"offset":3143},"end":{"line":148,"column":8,"offset":3146}}}],"position":{"start":{"line":148,"column":1,"offset":3139},"end":{"line":148,"column":8,"offset":3146}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"今回 MySQL のバージョンアップにチャレンジすることで、mysql のエラーログの見方を覚えたりバージョンの切り替えを覚えることができました。","position":{"start":{"line":149,"column":1,"offset":3147},"end":{"line":149,"column":74,"offset":3220}}}],"position":{"start":{"line":149,"column":1,"offset":3147},"end":{"line":149,"column":74,"offset":3220}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ハマってよかったーーー。","position":{"start":{"line":151,"column":1,"offset":3222},"end":{"line":151,"column":13,"offset":3234}}}],"position":{"start":{"line":151,"column":1,"offset":3222},"end":{"line":151,"column":13,"offset":3234}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":152,"column":1,"offset":3235}}}}