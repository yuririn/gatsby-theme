{"expireTime":9007200880801113000,"key":"transformer-remark-markdown-html-ast-c0e4b4d468f8fbf0f4a53d16a53a849a-gatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"デフォルトでも十分優秀なページリストブロック"},"children":[{"type":"text","value":"デフォルトでも十分優秀なページリストブロック","position":{"start":{"line":1,"column":4,"offset":3},"end":{"line":1,"column":26,"offset":25}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":26,"offset":25}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ページリストブロックはデフォルトでもとても優秀なブロックで、記事の一覧を出力するのによく重宝します。","position":{"start":{"line":2,"column":1,"offset":26},"end":{"line":2,"column":51,"offset":76}}}],"position":{"start":{"line":2,"column":1,"offset":26},"end":{"line":2,"column":51,"offset":76}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"多少、コードは書かないといけませんが、その学習コストを入れても十分使えます。","position":{"start":{"line":4,"column":1,"offset":78},"end":{"line":4,"column":39,"offset":116}}}],"position":{"start":{"line":4,"column":1,"offset":78},"end":{"line":4,"column":39,"offset":116}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"デフォルトのテンプレートで主にできること"},"children":[{"type":"text","value":"デフォルトのテンプレートで主にできること","position":{"start":{"line":6,"column":5,"offset":122},"end":{"line":6,"column":25,"offset":142}}}],"position":{"start":{"line":6,"column":1,"offset":118},"end":{"line":6,"column":25,"offset":142}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"親ページで絞り込み","position":{"start":{"line":8,"column":3,"offset":146},"end":{"line":8,"column":12,"offset":155}}}],"position":{"start":{"line":8,"column":1,"offset":144},"end":{"line":8,"column":12,"offset":155}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ページタイプで絞り込み","position":{"start":{"line":9,"column":3,"offset":158},"end":{"line":9,"column":14,"offset":169}}}],"position":{"start":{"line":9,"column":1,"offset":156},"end":{"line":9,"column":14,"offset":169}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"タグで絞り込み","position":{"start":{"line":10,"column":3,"offset":172},"end":{"line":10,"column":10,"offset":179}}}],"position":{"start":{"line":10,"column":1,"offset":170},"end":{"line":10,"column":10,"offset":179}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"トピックスで絞り込み","position":{"start":{"line":11,"column":3,"offset":182},"end":{"line":11,"column":13,"offset":192}}}],"position":{"start":{"line":11,"column":1,"offset":180},"end":{"line":11,"column":13,"offset":192}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"並び替え","position":{"start":{"line":12,"column":3,"offset":195},"end":{"line":12,"column":7,"offset":199}}}],"position":{"start":{"line":12,"column":1,"offset":193},"end":{"line":12,"column":7,"offset":199}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"日付で表示・非表示ページをコントロール","position":{"start":{"line":13,"column":3,"offset":202},"end":{"line":13,"column":22,"offset":221}}}],"position":{"start":{"line":13,"column":1,"offset":200},"end":{"line":13,"column":22,"offset":221}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ページネーション","position":{"start":{"line":14,"column":3,"offset":224},"end":{"line":14,"column":11,"offset":232}}}],"position":{"start":{"line":14,"column":1,"offset":222},"end":{"line":14,"column":11,"offset":232}}},{"type":"text","value":"\n"}],"position":{"start":{"line":8,"column":1,"offset":144},"end":{"line":14,"column":11,"offset":232}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"任意の属性で絞り込みをする\nページリストブロックには変数","position":{"start":{"line":16,"column":1,"offset":234},"end":{"line":17,"column":15,"offset":262}}},{"type":"raw","value":"<code class=\"language-text\">$list</code>","position":{"start":{"line":17,"column":15,"offset":262},"end":{"line":17,"column":22,"offset":269}}},{"type":"text","value":"の中に管理画面で設定した絞り込みの値が入ったものが渡ってます。","position":{"start":{"line":17,"column":22,"offset":269},"end":{"line":17,"column":53,"offset":300}}}],"position":{"start":{"line":16,"column":1,"offset":234},"end":{"line":17,"column":53,"offset":300}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"$list->getResults(); で結果を配列で出力でき","position":{"start":{"line":19,"column":1,"offset":302},"end":{"line":19,"column":33,"offset":334}}},{"type":"raw","value":"<code class=\"language-text\">$pages</code>","position":{"start":{"line":19,"column":33,"offset":334},"end":{"line":19,"column":41,"offset":342}}},{"type":"text","value":"に格納されています。","position":{"start":{"line":19,"column":41,"offset":342},"end":{"line":19,"column":51,"offset":352}}}],"position":{"start":{"line":19,"column":1,"offset":302},"end":{"line":19,"column":51,"offset":352}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"なので一旦、 ","position":{"start":{"line":21,"column":1,"offset":354},"end":{"line":21,"column":8,"offset":361}}},{"type":"raw","value":"<code class=\"language-text\">filterByAttribute();</code>","position":{"start":{"line":21,"column":8,"offset":361},"end":{"line":21,"column":30,"offset":383}}},{"type":"text","value":" で属性での絞り込みを追加して、再度","position":{"start":{"line":21,"column":30,"offset":383},"end":{"line":21,"column":48,"offset":401}}},{"type":"raw","value":"<code class=\"language-text\">$list->getResults();</code>","position":{"start":{"line":21,"column":48,"offset":401},"end":{"line":21,"column":70,"offset":423}}},{"type":"text","value":" で絞り込み結果を再度 $pages（同じ変数名がやな人は変えてね）に代入すれば最小限の労力でカスタマイズできます。","position":{"start":{"line":21,"column":70,"offset":423},"end":{"line":21,"column":128,"offset":481}}}],"position":{"start":{"line":21,"column":1,"offset":354},"end":{"line":21,"column":128,"offset":481}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$list->filterByAttribute(【属性名】, 【値】, \"=\");</code></pre></div>","position":{"start":{"line":23,"column":1,"offset":483},"end":{"line":25,"column":4,"offset":533}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ナビを出力したら以下のコードで絞り込みを追加します。","position":{"start":{"line":27,"column":1,"offset":535},"end":{"line":27,"column":27,"offset":561}}}],"position":{"start":{"line":27,"column":1,"offset":535},"end":{"line":27,"column":27,"offset":561}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">if (isset($_GET['value']) {\n    //属性ハンドル取得\n    $attrSet = h($_GET['attr']);\n\n\tforeach ($optionList as $key ) {\n\n        if($key->value == h($_GET['value'])){\n            // ジャンル名が同じものを出力\n            $list->filterByAttribute($choumeiSet, $key->value, \"=\");\n            break;\n        }\n    }\n\n    $pages = $list->getResults();\n}</code></pre></div>","position":{"start":{"line":28,"column":1,"offset":562},"end":{"line":44,"column":4,"offset":897}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"あとは通常通り、 ","position":{"start":{"line":45,"column":1,"offset":898},"end":{"line":45,"column":10,"offset":907}}},{"type":"raw","value":"<code class=\"language-text\">$pages</code>","position":{"start":{"line":45,"column":10,"offset":907},"end":{"line":45,"column":18,"offset":915}}},{"type":"text","value":" を ","position":{"start":{"line":45,"column":18,"offset":915},"end":{"line":45,"column":21,"offset":918}}},{"type":"raw","value":"<code class=\"language-text\">foreach</code>","position":{"start":{"line":45,"column":21,"offset":918},"end":{"line":45,"column":30,"offset":927}}},{"type":"text","value":" で回せば絞り込みは完成です。ページネーションも変更する必要はありません。","position":{"start":{"line":45,"column":30,"offset":927},"end":{"line":45,"column":67,"offset":964}}}],"position":{"start":{"line":45,"column":1,"offset":898},"end":{"line":45,"column":67,"offset":964}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"おまけ"},"children":[{"type":"text","value":"おまけ","position":{"start":{"line":46,"column":4,"offset":968},"end":{"line":46,"column":7,"offset":971}}}],"position":{"start":{"line":46,"column":1,"offset":965},"end":{"line":46,"column":7,"offset":971}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"オプションリストで出力するともっと簡単\nちなみにオプションリスト(","position":{"start":{"line":47,"column":1,"offset":972},"end":{"line":48,"column":14,"offset":1005}}},{"type":"raw","value":"<code class=\"language-text\">&lt;select></code>","position":{"start":{"line":48,"column":14,"offset":1005},"end":{"line":48,"column":24,"offset":1015}}},{"type":"text","value":"とか","position":{"start":{"line":48,"column":24,"offset":1015},"end":{"line":48,"column":26,"offset":1017}}},{"type":"raw","value":"<code class=\"language-text\">&lt;option></code>","position":{"start":{"line":48,"column":26,"offset":1017},"end":{"line":48,"column":36,"offset":1027}}},{"type":"text","value":")で出力する場合は、以下のコードでもいけます。","position":{"start":{"line":48,"column":36,"offset":1027},"end":{"line":48,"column":59,"offset":1050}}}],"position":{"start":{"line":47,"column":1,"offset":972},"end":{"line":48,"column":59,"offset":1050}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"勝手に出力してくれるのでめちゃめちゃ便利です。\nただしどんなコードがあらかじめ出力されるか把握した上で、コーディングしないと泣く羽目に遭いますよ。","position":{"start":{"line":50,"column":1,"offset":1052},"end":{"line":51,"column":50,"offset":1125}}}],"position":{"start":{"line":50,"column":1,"offset":1052},"end":{"line":51,"column":50,"offset":1125}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ak = CollectionAttributeKey::getByHandle('genre');\n$ak->render('search');</code></pre></div>","position":{"start":{"line":53,"column":1,"offset":1127},"end":{"line":56,"column":4,"offset":1209}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"複数の属性をまとめて扱いたいならセットに登録しよう"},"children":[{"type":"text","value":"複数の属性をまとめて扱いたいならセットに登録しよう","position":{"start":{"line":58,"column":5,"offset":1215},"end":{"line":58,"column":30,"offset":1240}}}],"position":{"start":{"line":58,"column":1,"offset":1211},"end":{"line":58,"column":30,"offset":1240}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ページ属性はまとめてセットに登録することが可能です。\n登録したデータをまとめて foreach で回せるので便利です。","position":{"start":{"line":59,"column":1,"offset":1241},"end":{"line":60,"column":33,"offset":1300}}}],"position":{"start":{"line":59,"column":1,"offset":1241},"end":{"line":60,"column":33,"offset":1300}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$choumei_set = AttributeSet::getByHandle('[セット名]')->getAttributeKeys();</code></pre></div>","position":{"start":{"line":62,"column":1,"offset":1302},"end":{"line":64,"column":4,"offset":1381}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"まとめ"},"children":[{"type":"text","value":"まとめ","position":{"start":{"line":65,"column":4,"offset":1385},"end":{"line":65,"column":7,"offset":1388}}}],"position":{"start":{"line":65,"column":1,"offset":1382},"end":{"line":65,"column":7,"offset":1388}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"実際に私が実装したのは複数の属性を作って絞り込んだのでもっと複雑でしたが、このくらいミニマムなものを改造してチャレンジすると敷居が低くて良いと思います。\nもちろん、いろんな種類の属性でできます！\n以下公式サイトのURLを見ながら、ぜひやってみるといいと思います。","position":{"start":{"line":66,"column":1,"offset":1389},"end":{"line":68,"column":34,"offset":1520}}}],"position":{"start":{"line":66,"column":1,"offset":1389},"end":{"line":68,"column":34,"offset":1520}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"参考サイト"},"children":[{"type":"text","value":"参考サイト","position":{"start":{"line":69,"column":5,"offset":1525},"end":{"line":69,"column":10,"offset":1530}}}],"position":{"start":{"line":69,"column":1,"offset":1521},"end":{"line":69,"column":10,"offset":1530}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://concrete5-japan.org/help/5-7/developer/working-with-pages/searching-and-sorting-with-the-pagelist-object/"},"children":[{"type":"text","value":"PageList オブジェクトで検索・ソートを行う","position":{"start":{"line":70,"column":2,"offset":1532},"end":{"line":70,"column":27,"offset":1557}}}],"position":{"start":{"line":70,"column":1,"offset":1531},"end":{"line":70,"column":143,"offset":1673}}}],"position":{"start":{"line":70,"column":1,"offset":1531},"end":{"line":70,"column":143,"offset":1673}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":71,"column":1,"offset":1674}}}}