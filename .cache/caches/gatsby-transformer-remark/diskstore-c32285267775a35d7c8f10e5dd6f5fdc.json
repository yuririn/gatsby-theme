{"expireTime":9007200880801122000,"key":"transformer-remark-markdown-html-a1e2351365bd2b07173d58fdcd19a201-gatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<h2 id=\"今までのgatsbyの記事と注意点\">今までのGatsbyの記事と注意点</h2>\n<p>現在ここまで記載しています。<br>制作するまでを目標にUPしていくので順を追ったらGatsbyサイトが作れると思います。</p>\n<ol>\n<li><a href=\"/blogs/entry401/\">インストールからNetlifyデプロイまで</a></li>\n<li><a href=\"/blogs/entry406/\">投稿ページの充実と画像の方法</a></li>\n<li><a href=\"/blogs/entry408/\">ブログ記事、カテゴリー、タグ一覧の出力</a></li>\n<li><a href=\"/blogs/entry410/\">プラグインを利用して目次出力</a></li>\n<li><a href=\"/blogs/entry413/\">プラグインナシで一覧にページネーション実装</a></li>\n<li>個別ページテンプレート作成（←イマココ）</li>\n<li><a href=\"/blogs/entry418/\">プラグインHelmetでSEO調整</a></li>\n<li><a href=\"/blogs/entry421/\">CSSコンポーネントでオリジナルページを作ろう！！</a></li>\n<li><a href=\"/blogs/entry430/\">関連記事一覧出力</a></li>\n</ol>\n<h3 id=\"このシリーズではテーマgatsby-starter-blogを改造\">このシリーズではテーマGatsby Starter Blogを改造</h3>\n<p>この記事は一番メジャーなテンプレート、「<em>Gatsby Starter Blog</em>」を改造しています。同じテーマでないと動かない可能性があります。</p>\n<h2 id=\"個別ページテンプレートの作り方\">個別ページテンプレートの作り方</h2>\n<p>ポイントはループに含めないという点だけです。今回はブログ詳細一覧をコピーしてテンプレートを作成しました。</p>\n<p>ファイル名をpages.jsとしておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/ (プロジェクトディレクトリー)\n    ├ gatsby-node.js（ページを生成するところ）\n    ├ src/\n    |    └ templates/\n    |       └ pages.js（個別ページを出力するテンプレート）\n    └ content/\n\t   ├ blogs/\n\t   ├ assets/\n\t   |  └ images/common/（個別ページの画像ファイルなどはすべてここに格納）\n       └ about.md (個別のページ)</code></pre></div>\n<h2 id=\"createpageで個別ページを生成する\">createPageで個別ページを生成する</h2>\n<p>gatsby-node.jsにページを生成するためのコードを追記しておきます。<br>\n<code class=\"language-text\">createPage()</code>関数でページは生成されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ~ 省略 ~</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> reporter <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ~ 省略 ~</span>\n\n  <span class=\"token keyword\">const</span> pagePost <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./src/templates/pages.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// ~ 省略 ~</span>\n\n    <span class=\"token comment\">// pagetypeがpageのみ取得</span>\n    posts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>pagetype <span class=\"token operator\">===</span> <span class=\"token string\">'page'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          path<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n          component<span class=\"token operator\">:</span> pagePost<span class=\"token punctuation\">,</span>\n          context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            id<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// ~ 省略 ~</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"個別ページを出力するテンプレートpagesjsの編集\">個別ページを出力するテンプレートpages.jsの編集</h3>\n<p>記事のIDが一致するものを出力するように設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PagePostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>markdownRemark\n  <span class=\"token keyword\">const</span> siteTitle <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>siteMetadata<span class=\"token operator\">?.</span>title <span class=\"token operator\">||</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Title</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token comment\">// アイキャッチのパスを取得</span>\n  <span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>allFile<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> data<span class=\"token punctuation\">.</span>allFile<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>fluid<span class=\"token punctuation\">.</span>src <span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Layout location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span> title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>siteTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span><span class=\"token constant\">SEO</span>\n        title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span>\n        description<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>description <span class=\"token operator\">||</span> post<span class=\"token punctuation\">.</span>excerpt<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"l-main_contents\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>article\n          <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"l-container--md\"</span>\n        <span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>header<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>h1 <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"c-article__heading\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>section <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"c-editArea\"</span>\n              dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> PagePostTemplate\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query PagePostBySlug(\n    $id: String!\n    ) {\n      site {\n        siteMetadata {\n          title\n        }\n    }\n    markdownRemark(\n      id: { eq: $id }\n    ) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      frontmatter {\n        title\n        date(formatString: \"YYYY.MM.DD\")\n        description\n        hero\n        pagetype\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<h3 id=\"aboutmdファイルを追加し編集\">about.mdファイルを追加し編集</h3>\n<p>aboutページを追加します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7e4d889962f097a1a48da319300115a/a2510/entry416-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.78481012658227%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd1OZYA//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECAxD/2gAIAQEAAQUCJpUuZxOaP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAABARAAEC/9oACAEBAAY/Ao6KyP/EABkQAQEAAwEAAAAAAAAAAAAAAAERABAhMf/aAAgBAQABPyGJ5l0iaXFdIt7r/9oADAMBAAIAAwAAABAzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQACAwEAAAAAAAAAAAAAAAERIQAQMWH/2gAIAQEAAT8QFRQnzmWduFHSSiVzmFWEJSq6/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b7e4d889962f097a1a48da319300115a/81b7c/entry416-1.webp 158w,\n/static/b7e4d889962f097a1a48da319300115a/6ea66/entry416-1.webp 315w,\n/static/b7e4d889962f097a1a48da319300115a/8aab1/entry416-1.webp 630w,\n/static/b7e4d889962f097a1a48da319300115a/a70f5/entry416-1.webp 945w,\n/static/b7e4d889962f097a1a48da319300115a/a5d4d/entry416-1.webp 1000w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b7e4d889962f097a1a48da319300115a/ff44c/entry416-1.jpg 158w,\n/static/b7e4d889962f097a1a48da319300115a/a6688/entry416-1.jpg 315w,\n/static/b7e4d889962f097a1a48da319300115a/828fb/entry416-1.jpg 630w,\n/static/b7e4d889962f097a1a48da319300115a/0ede0/entry416-1.jpg 945w,\n/static/b7e4d889962f097a1a48da319300115a/a2510/entry416-1.jpg 1000w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b7e4d889962f097a1a48da319300115a/828fb/entry416-1.jpg\"\n            alt=\"銀ねこアトリエとは？\"\n            title=\"銀ねこアトリエとは？\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">---\ntitle: 銀ねこアトリエとは？\ndate: 2014-05-14\npagetype: page\ndescription: 「銀ねこアトリエ」は私の技術的なチャレンジや生活や生き方を綴った公開備忘録です。\n---\n~ 省略 ~</code></pre></div>\n<p>これで個別ページが追加できるようになりました。</p>\n<h2 id=\"まとめ・個別ページの追加はとってもカンタン\">まとめ・個別ページの追加はとってもカンタン</h2>\n<p>とってもカンタンでしたね！</p>\n<p>次回「<em>Gatsbyブログサイト移行物語</em>」ではGatsbyサイトでの<a href=\"/blogs/entry418/\">OGP画像出力やプラグインHelmetを使ったSEO対応</a>の記事です。</p>\n<p>皆さんのコーディングライフの一助となれば幸いです。</p>\n<p>最後までお読みいただきありがとうございました。</p>"}