{"expireTime":9007200880808521000,"key":"transformer-remark-markdown-html-6ebccbc54191405e8d0111428817aa0f-gatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<h2 id=\"今までのgatsbyの記事と注意点\">今までのGatsbyの記事と注意点</h2>\n<p>現在ここまで記載しています。<br>制作するまでを目標にUPしていくので順を追ったらGatsbyサイトが作れると思います。</p>\n<ol>\n<li><a href=\"/blogs/entry401/\">インストールからNetlifyデプロイまで</a></li>\n<li><a href=\"/blogs/entry406/\">投稿ページの充実と画像の方法</a></li>\n<li><a href=\"/blogs/entry408/\">ブログ記事、カテゴリー、タグ一覧の出力</a></li>\n<li>プラグインを利用して目次出力（←イマココ）</li>\n<li><a href=\"/blogs/entry413/\">プラグインナシで一覧にページネーション実装</a></li>\n<li><a href=\"/blogs/entry416/\">個別ページテンプレート作成</a></li>\n<li><a href=\"/blogs/entry418/\">プラグインHelmetでSEO調整</a></li>\n<li><a href=\"/blogs/entry420/\">CSSコンポーネントでオリジナルページを作ろう！！</a></li>\n<li><a href=\"/blogs/entry230/\">関連記事一覧出力</a></li>\n</ol>\n<h3 id=\"このシリーズではテーマgatsby-starter-blogを改造\">このシリーズではテーマGatsby Starter Blogを改造</h3>\n<p>この記事は一番メジャーなテンプレート、「<em>Gatsby Starter Blog</em>」を改造しています。同じテーマでないと動かない可能性があります。</p>\n<h2 id=\"目次出力のためのプラグインgatsby-remark-autolink-headersを利用\">目次出力のためのプラグインgatsby-remark-autolink-headersを利用</h2>\n<p>GatsbyJSは豊富なプラグインが魅力です。</p>\n<p>gatsby-remark-autolink-headersはプラグインの1つです。<br>\n以下のようなことができます。</p>\n<ul>\n<li>見出しタグにidを振る</li>\n<li>見出しタグを抽出しリンク付きのリストタグを出力</li>\n</ul>\n<p><a href=\"https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/\">gatsby-remark-autolink-headers</a></p>\n<h3 id=\"gatsby-remark-autolink-headersをインストール\">gatsby-remark-autolink-headersをインストール</h3>\n<p><code class=\"language-text\">npm</code>コマンドで手軽にインストールできます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-remark-autolink-headers</code></pre></div>\n<h3 id=\"gatsby-configjsにプラグインの追記\">gatsby-config.jsにプラグインの追記</h3>\n<p>gatsby-remark-autolink-headersはgatsby-transformer-remarkのサブプラグインです。<br>なので、gatsby-config.jsの<em>gatsby-transformer-remarkのoption</em>に記載します。</p>\n<p>テーマGatsby Starter Blogを利用していればgatsby-transformer-remarkはインストールされているはずです。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-autolink-headers</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><br><br>このプラグイン1コ問題があって、公式サイトによると<em>プラグインgatsby-remark-prismjsよりも前に読み込む必要があります</em>。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// good</span>\n<span class=\"token punctuation\">{</span>\n  resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-autolink-headers</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// bad</span>\n<span class=\"token punctuation\">{</span>\n  resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// should be placed after `gatsby-remark-autolink-headers`</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-autolink-headers</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"gatsby-remark-autolink-headersを実装\">gatsby-remark-autolink-headersを実装</h3>\n<p>今回はシンプルにアイコンなし。以下のように設定しました。</p>\n<p><a href=\"#%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E4%B8%80%E8%A6%A7\">オプション</a>の説明については記事の後ろに記載します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n            resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-autolink-headers</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              icon<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n              maintainCase<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"目次を出力するコンポーネントを作成する\">目次を出力するコンポーネントを作成する</h3>\n<p>次に目次を出力するコンポーネントを作成します。</p>\n<p>src/components/内にtopics.jsを追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src/\n    ├ templates/\n    |   └ blog-post.js\n    └ components/\n        └ topics.js（新規作成）</code></pre></div>\n<p>コードはこんな感じです。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topic</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"mokujiList\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>目次<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div\n          dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n            __html<span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Topic<span class=\"token punctuation\">;</span></code></pre></div>\n<p>リスト化されたデータは<code class=\"language-text\">data.markdownRemark.tableOfContents</code>に格納されます。</p>\n<p>blog-post.jsのクエリの<code class=\"language-text\">markdownRemark()</code>内に<code class=\"language-text\">tableOfContents</code>を<em>必ず追記</em>してください。</p>\n<p>あとは記事の読み込みたい場所にコンポーネントを出力するだけです。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Topic <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/topic\"</span>\n\n<span class=\"token comment\">//~コード省略~</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BlogPostTemplate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">{</span><span class=\"token comment\">/*読み込みたい場所に挿入*/</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span>Topic data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>markdownRemark<span class=\"token punctuation\">.</span>tableOfContents<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n  <span class=\"token comment\">//~コード省略~</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> BlogPostTemplate\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query BlogPostBySlug(\n    $id: String!\n    $previousPostId: String\n    $nextPostId: String\n    $hero: String\n  )\n  {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allFile(\n      filter: {\n        relativePath: {eq: $hero}\n        sourceInstanceName: {eq: \"assets\"}\n      }\n    ){\n      edges {\n        node {\n          name\n          relativePath\n          childImageSharp {\n          fluid(maxWidth: 800) {\n          ...GatsbyImageSharpFluid_withWebp\n        }\n            }\n          }\n        }\n      }\n    markdownRemark(\n      id: {eq: $id }\n    ) {\n        id\n        excerpt(pruneLength: 160)\n        html\n        tableOfContents\n        frontmatter {\n          title\n          date(formatString: \"YYYY.MM.DD\")\n          description\n          lead\n          hero\n          category\n          cateId\n          tags\n          pagetype\n          modifieddate(formatString: \"YYYY.MM.DD\")\n        }\n      }\n      previous: markdownRemark(id: {eq: $previousPostId }) {\n        fields {\n          slug\n        }\n        frontmatter {\n          title\n        }\n      }\n      next: markdownRemark(id: {eq: $nextPostId }) {\n        fields {\n          slug\n        }\n        frontmatter {\n          title\n        }\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<h2 id=\"出力されるタグをulからolに変え、開閉ボタンをつける\">出力されるタグをulからolに変え、開閉ボタンをつける</h2>\n<p>リスト出力がul（アンオーダーリスト）なのは個人的にはちょっと気に入らないです。<br>\nなのでここから少し改変します。<br><br></p>\n<p>このサイトではolはすでにカウンター関数を利用してスタイリングしてあります。</p>\n<a class=\"article-link\" href=\"/blogs/entry315/\">\n<section><div class=\"article-link__img\"><img alt=\"CSSカウンターを使ってリストタグにナンバーを振る\" src=\"/static/d3d707b7c02bb897cc179d3feb35e47b/f836f/entry363.jpg\" class=\"\" width=\"150\" height=\"113\"></div><div class=\"article-link__main\">\n<div class=\"article-link__main__title\">CSSカウンターを使ってリストタグにナンバーを振る</div>\n<p class=\"description\">1-2、2-3みたいにリストや見出しにナンバーが振られているサイトを見か･･･</p>\n<p>\n<time datetime=\"2020-03-29\">2020.03.29</time>\n</p>\n</div>\n</section>\n</a>\n<p>JSの<code class=\"language-text\">replace</code>で<code class=\"language-text\">ul></code>から<code class=\"language-text\">ol></code>に置換します。<br>（閉じタグもあるのでこのような形にしました）</p>\n<p>後ほどアコーディオン機能を実装します。チェックボックスを追加して<code class=\"language-text\">h2</code>を<code class=\"language-text\">label</code>に書き換えておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topic</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(ul>)</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">gi</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ol>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"p-box--gray u-mblg\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"checkbox\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"mokuji\"</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"mokuji\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>label <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"c-content__heading\"</span> <span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"mokuji\"</span><span class=\"token operator\">></span>目次<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"c-editArea mokujiList\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div\n          dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n            __html<span class=\"token operator\">:</span> list<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Topic<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"アコーディオンはcssで実装する\">アコーディオンはCSSで実装する</h3>\n<p>アコーディオンは手間なのでCSSのみで実装しました。</p>\n<p>今回はコードしか紹介しませんので詳しく原理を知りたい方はこちらをご覧ください。</p>\n<a class=\"article-link\" href=\"/blogs/entry315/\">\n<section><div class=\"article-link__img\"><img alt=\"セブ島唯一日本人占い師・さくら庵のマイアさんから学ぶかみーゆ流占いとの付き合い方\" src=\"/static/45a35d1dd3ec602a1e1eff28669aade0/f836f/entry315.jpg\" class=\"\" width=\"150\" height=\"113\"></div><div class=\"article-link__main\">\n<div class=\"article-link__main__title\">CSS3 アニメーションで軽量なアコーディオンメニューを作ろう！</div>\n<p class=\"description\">CSS3 アニメーションって便利ですよね？jQueryに依存しないと軽量･･･</p>\n<p>\n<time datetime=\"2019-02-11\">2019.02.11</time>\n</p>\n</div>\n</section>\n</a>\n<p>HTMLはこんな感じで出力されます。コードが長いので省略しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>p-box--gray u-mblg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mokuji<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mokuji<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>c-content__heading<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mokuji<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>目次<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>c-editArea mokujiList<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span><span class=\"token punctuation\">></span></span>\n    ここリストが出力されます\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ol</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><br><br>CSSです。モジュール化してもいいですが私はCSSに直書きしました。<br>\nCSSモジュール化の仕方についてはポートフォリのページを作った際に実装したので改めて記事化しますね。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.mokuji</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.mokuji:checked ~ .mokujiList</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">max-height</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.mokuji ~ .mokujiList</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">max-height</span><span class=\"token punctuation\">:</span> 200vh<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> .3s<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.mokuji + .c-content__heading</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.mokuji + .c-content__heading:before</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> .3s<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 1px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #464675<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.mokuji:checked + .c-content__heading:after</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>0deg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.mokuji+ .c-content__heading:after</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>90deg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> .3s<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 1px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #464675<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br><br>最初から閉じておきたい場合は、<code class=\"language-text\">input</code>に<code class=\"language-text\">checked</code>を付与しておきましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mokuji<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mokuji<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">checked</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"オプションの一覧\">オプションの一覧</h2>\n<p>オプションの一覧です。icon以外はあまり使うことないかもしれません。</p>\n<table>\n<thead>\n<tr>\n<th>オプション</th>\n<th>用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>offsetY</td>\n<td>リンクをクリックして移動した時の見出しの上の空き（オフセット）の調整。pxです</td>\n</tr>\n<tr>\n<td>icon</td>\n<td>Boolean。デフォルトはtrueでホバーすると左にアイコンが表示されまます。</td>\n</tr>\n<tr>\n<td>class</td>\n<td>アンカーに独自のクラス名を指定するそう</td>\n</tr>\n<tr>\n<td>maintainCase</td>\n<td>Boolean。含まれる要は大文字小文字を維持するか指定できる。</td>\n</tr>\n<tr>\n<td>removeAccents</td>\n<td>Boolean。アクセント削除。日本人のサイトにはまず必要なさそう。</td>\n</tr>\n<tr>\n<td>isIconAfterHeader</td>\n<td>Boolean。アイコンの位置を右側に移動</td>\n</tr>\n<tr>\n<td>elements</td>\n<td>リンクを自動挿入するためのタグ一覧を配列で指定</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"まとめ\">まとめ</h2>\n<p>目次があるとこの記事は<em>どんなコンテンツが含まれてるか読者にわかりやすい</em>のでオススメです。</p>\n<p>サイト改修ついでにGatsbyのことを記事化してますが、このサイトがやっとサイトとして機能するようになり私もホッとしました。</p>\n<p>この記事が皆さんのコーディングライフの一助となれば幸いです。</p>\n<p>最後までお読みいただきありがとうございました。</p>"}