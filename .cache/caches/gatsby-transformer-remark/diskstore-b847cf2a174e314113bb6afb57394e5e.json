{"expireTime":9007200880801128000,"key":"transformer-remark-markdown-html-2533d5f8875334ad3bd84ddb6d0cbd0f-gatsby-remark-imagesgatsby-remark-autolink-headersgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<p><em>この記事の対象者</em></p>\n<ul>\n<li>自作したプラグインの更新を一限管理したい</li>\n<li>GitHubでプラグインを管理したい</li>\n<li>自作したプラグインを自動更新できるようにしたい</li>\n</ul>\n<div class=\"msg-baloon\">\n<p><img src=\"/static/ecd737bbd9e6b99fd33fbd308f2b88e8/f836f/camille.jpg\">かみーゆ</p>\n<p>GitHubにリポジトリに自作したWordPressプラグインの更新を通知させたり自動更新可能にする方法を紹介します。</p>\n</div>\n<p><small>※ プラグインを作ることができて、GitHubアカウントを開設していることが前提条件です。<br>※ この記事は不十分なため追記予定です。</small></p>\n<p>めっちゃ簡単なプラグインの作り方はこちらになります。</p>\n<a class=\"article-link\" href=\"/blogs/entry283/\">\n<section><div class=\"article-link__img\"><img alt=\"WordPress で自作した機能を plugin 化してまとめると幸せになれた\n\" src=\"/static/c00a1ad6ac74b4ff881b3a105663bb57/f3dec/entry211.png\" width=\"150\" height=\"113\" class=\"\"></div><div class=\"article-link__main\">\n<div class=\"article-link__main__title\">WordPress で自作した機能を plugin 化してまとめると幸せになれた\n</div>\n<p class=\"description\">WordPress のfunctions.php に書いていく、自作した機能をプラグインごとにまとめたらめちゃめちゃ便利だったのでその方法を･･･</p>\n<p>\n<time datetime=\"2018-08-14\">2018.08.14</time>\n</p>\n</div>\n</section></a>\n<h2 id=\"plugin-update-checkerをgithubからダウンロード\">Plugin Update CheckerをGitHubからダウンロード</h2>\n<p>まずはPlugin Update CheckerをGitHubからダウンロード。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.22784810126582%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHIlTYxB//EABcQAAMBAAAAAAAAAAAAAAAAAAAQIUH/2gAIAQEAAQUChFi//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAERYSAhMf/aAAgBAQABPyF0IsPusH//2gAMAwEAAgADAAAAEODf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAEEAwEAAAAAAAAAAAAAAQARIUFhEHGR0f/aAAgBAQABPxAZCvR9iefRKC403G5dc//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7db7ad99c9d52d641b8ba5188115d7cd/81b7c/entry466-1.webp 158w,\n/static/7db7ad99c9d52d641b8ba5188115d7cd/6ea66/entry466-1.webp 315w,\n/static/7db7ad99c9d52d641b8ba5188115d7cd/8aab1/entry466-1.webp 630w,\n/static/7db7ad99c9d52d641b8ba5188115d7cd/d00b9/entry466-1.webp 800w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7db7ad99c9d52d641b8ba5188115d7cd/ff44c/entry466-1.jpg 158w,\n/static/7db7ad99c9d52d641b8ba5188115d7cd/a6688/entry466-1.jpg 315w,\n/static/7db7ad99c9d52d641b8ba5188115d7cd/828fb/entry466-1.jpg 630w,\n/static/7db7ad99c9d52d641b8ba5188115d7cd/4b190/entry466-1.jpg 800w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7db7ad99c9d52d641b8ba5188115d7cd/828fb/entry466-1.jpg\"\n            alt=\"Plugin Update Checker\"\n            title=\"Plugin Update Checker\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p><a href=\"https://github.com/YahnisElsts/plugin-update-checker\">Plugin Update Checker</a></p>\n<p>the latest releaseから、Assetsが2つあるのでいずれかをDLします。</p>\n<p>本日時点での最新は<a href=\"https://github.com/YahnisElsts/plugin-update-checker/releases/tag/v4.11\">4.11(5月16日更新)</a>でした。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.18987341772152%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHHgsoD/8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAEFAhz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAACAwAAAAAAAAAAAAAAAAAAARAxQf/aAAgBAQABPyG0jEf/2gAMAwEAAgADAAAAEAff/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAAMBAAAAAAAAAAAAAAAAAQARIWH/2gAIAQEAAT8QHRsqFAL5Gf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9cae2161a08da7c2a81de9278ec678a7/81b7c/entry466-2.webp 158w,\n/static/9cae2161a08da7c2a81de9278ec678a7/6ea66/entry466-2.webp 315w,\n/static/9cae2161a08da7c2a81de9278ec678a7/8aab1/entry466-2.webp 630w,\n/static/9cae2161a08da7c2a81de9278ec678a7/d00b9/entry466-2.webp 800w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9cae2161a08da7c2a81de9278ec678a7/ff44c/entry466-2.jpg 158w,\n/static/9cae2161a08da7c2a81de9278ec678a7/a6688/entry466-2.jpg 315w,\n/static/9cae2161a08da7c2a81de9278ec678a7/828fb/entry466-2.jpg 630w,\n/static/9cae2161a08da7c2a81de9278ec678a7/4b190/entry466-2.jpg 800w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9cae2161a08da7c2a81de9278ec678a7/828fb/entry466-2.jpg\"\n            alt=\"Plugin Update Checker\"\n            title=\"Plugin Update Checker\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>今回は仮にmy-pluginというフォルダー内にプラグインを作っていきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/my-plugin\n  ├ my-plugin.php\n  ├ plugin-update-checker/ //Plugin Update CheckerのAssetsを解凍して格納しておく\n  └ readme.txt</code></pre></div>\n<p><code class=\"language-text\">my-plugin.php</code>がこのプラグインの起点となるとファイルになります。</p>\n<p><code class=\"language-text\">plugin-update-checker/</code>内に格納した<code class=\"language-text\">plugin-update-checker.php</code>を読み込みます。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">require</span> <span class=\"token string single-quoted-string\">'plugin-update-checker/plugin-update-checker.php'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 「Plugin Update Checker」をインクルード</span>\n\n<span class=\"token variable\">$myUpdateChecker</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Puc_v4_Factory</span><span class=\"token operator\">::</span><span class=\"token function\">buildUpdateChecker</span><span class=\"token punctuation\">(</span>\n\t<span class=\"token string single-quoted-string\">'https://github.com/【アカウント名】/【リポジトリー名】'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">__FILE__</span><span class=\"token punctuation\">,</span><span class=\"token comment\">//書き換える必要なしこの場合my-plugin.phpのフルパスが取得できます。</span>\n\t<span class=\"token string single-quoted-string\">'my-plugin'</span><span class=\"token comment\">//プラグインのスラッグ</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>同期したいブランチを指定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$myUpdateChecker</span><span class=\"token operator\">-></span><span class=\"token function\">setBranch</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'main'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>これで指定したブランチにプッシュしたら、プラグイン側にも通知が来るようになります。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.49367088607595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHTsCSB/8QAFhAAAwAAAAAAAAAAAAAAAAAABBAz/9oACAEBAAEFAh4L/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAhBx/9oACAEBAAY/Agj/AP/EABcQAAMBAAAAAAAAAAAAAAAAAAABEDH/2gAIAQEAAT8hEWz/2gAMAwEAAgADAAAAEHwf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QZ//EABcQAQADAAAAAAAAAAAAAAAAAAEQEdH/2gAIAQEAAT8QAAFGmb//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0686c063db0ce9536d560691595a7e25/81b7c/entry466-3.webp 158w,\n/static/0686c063db0ce9536d560691595a7e25/6ea66/entry466-3.webp 315w,\n/static/0686c063db0ce9536d560691595a7e25/8aab1/entry466-3.webp 630w,\n/static/0686c063db0ce9536d560691595a7e25/a70f5/entry466-3.webp 945w,\n/static/0686c063db0ce9536d560691595a7e25/4ef06/entry466-3.webp 1260w,\n/static/0686c063db0ce9536d560691595a7e25/9e58b/entry466-3.webp 2838w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0686c063db0ce9536d560691595a7e25/ff44c/entry466-3.jpg 158w,\n/static/0686c063db0ce9536d560691595a7e25/a6688/entry466-3.jpg 315w,\n/static/0686c063db0ce9536d560691595a7e25/828fb/entry466-3.jpg 630w,\n/static/0686c063db0ce9536d560691595a7e25/0ede0/entry466-3.jpg 945w,\n/static/0686c063db0ce9536d560691595a7e25/3ac88/entry466-3.jpg 1260w,\n/static/0686c063db0ce9536d560691595a7e25/8bbd5/entry466-3.jpg 2838w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0686c063db0ce9536d560691595a7e25/828fb/entry466-3.jpg\"\n            alt=\"Plugin Update Checker\"\n            title=\"Plugin Update Checker\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.759493670886075%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABvtEAv//EABYQAAMAAAAAAAAAAAAAAAAAAAQQM//aAAgBAQABBQIWC//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAY/Ai//xAAYEAACAwAAAAAAAAAAAAAAAAAAARChsf/aAAgBAQABPyG49FH/2gAMAwEAAgADAAAAEIP/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EGf/xAAZEAEAAgMAAAAAAAAAAAAAAAABABARITH/2gAIAQEAAT8QICGDjGlf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/fc74e39d95c8ba2c4a2d39fc898f8b62/81b7c/entry466-4.webp 158w,\n/static/fc74e39d95c8ba2c4a2d39fc898f8b62/6ea66/entry466-4.webp 315w,\n/static/fc74e39d95c8ba2c4a2d39fc898f8b62/8aab1/entry466-4.webp 630w,\n/static/fc74e39d95c8ba2c4a2d39fc898f8b62/d00b9/entry466-4.webp 800w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/fc74e39d95c8ba2c4a2d39fc898f8b62/ff44c/entry466-4.jpg 158w,\n/static/fc74e39d95c8ba2c4a2d39fc898f8b62/a6688/entry466-4.jpg 315w,\n/static/fc74e39d95c8ba2c4a2d39fc898f8b62/828fb/entry466-4.jpg 630w,\n/static/fc74e39d95c8ba2c4a2d39fc898f8b62/4b190/entry466-4.jpg 800w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/fc74e39d95c8ba2c4a2d39fc898f8b62/828fb/entry466-4.jpg\"\n            alt=\"Plugin Update Checker\"\n            title=\"Plugin Update Checker\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>Plugin Update Checker公式ページに以下が書いてあります。</p>\n<p>readme.txtを追加しておきましょう。</p>\n<p><a href=\"https://wordpress.org/plugins/readme.txt\">the WordPress.org plugin readme standard</a></p>\n<blockquote>\n<p>Plugins only: Add a readme.txt file formatted according to the WordPress.org plugin readme standard to your repository. The contents of this file will be shown when the user clicks the “View version 1.2.3 details” link.<br>\nプラグインのみ：WordPress.orgプラグインのreadme標準に従ってフォーマットされたreadme.txtファイルをリポジトリに追加してください。このファイルの内容は、ユーザーが「バージョン1.2.3の詳細を表示」リンクをクリックすると表示されます。</p>\n</blockquote>\n<p>プライベートリポジトリを更新対象としたい場合は一手間必要です。</p>\n<p>アクセストークンを取得し、以下コードを追加。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$myUpdateChecker</span><span class=\"token operator\">-></span><span class=\"token function\">setAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'your-token-here'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><small>※ アクセストークンの設定の仕方は後日追記します。</small></p>\n<h2 id=\"assetsも自動更新にしたい\">Assetsも自動更新にしたい</h2>\n<p>以下コードもを追記しておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$myUpdateChecker->getVcsApi()->enableReleaseAssets();</code></pre></div>\n<h2 id=\"ガイドラインに違反？不安に思った方のために補足します\">ガイドラインに違反？不安に思った方のために補足します</h2>\n<p>公式WordPressサイトに<em>Plugin Update Checker</em>に関する記事が見つかりました。</p>\n<p>『WordPress.org 以外から配布したものに更新する機能』はマーケットプレースに出品するプラグインとしてはNGのようです。</p>\n<p>Update機能はあくまで公式WordPressのマーケットプレースに出さない、自作プラグイン用として使うのがよさそうです。</p>\n<p><a href=\"https://wordpress.org/support/topic/%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E9%81%95%E5%8F%8D%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6/\">ガイドライン違反について</a></p>\n<h2 id=\"まとめ・自作プラグインの更新をまとめて管理できて便利\">まとめ・自作プラグインの更新をまとめて管理できて便利</h2>\n<p>あくまで自作テーマやプラグインのアップデーターですが、バグや更新を一括でできるのはとても便利ですね。</p>\n<p>この記事が、みなさんのコーディングライフの一助となれば幸いです。</p>\n<p>最後までお読みいただきありがとうございました。</p>"}