{"data":{"site":{"siteMetadata":{"title":"銀ねこアトリエ"}},"allFile":{"edges":[{"node":{"name":"entry452","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#88b8d8","images":{"fallback":{"src":"/static/4e7d7db8849ad47fcf44a549cf857b2a/88c96/entry452.jpg","srcSet":"/static/4e7d7db8849ad47fcf44a549cf857b2a/15952/entry452.jpg 375w,\n/static/4e7d7db8849ad47fcf44a549cf857b2a/cd750/entry452.jpg 750w,\n/static/4e7d7db8849ad47fcf44a549cf857b2a/5caa2/entry452.jpg 1080w,\n/static/4e7d7db8849ad47fcf44a549cf857b2a/88c96/entry452.jpg 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/4e7d7db8849ad47fcf44a549cf857b2a/fd9fd/entry452.webp 375w,\n/static/4e7d7db8849ad47fcf44a549cf857b2a/e56aa/entry452.webp 750w,\n/static/4e7d7db8849ad47fcf44a549cf857b2a/257a3/entry452.webp 1080w,\n/static/4e7d7db8849ad47fcf44a549cf857b2a/296b8/entry452.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":900}}}}]},"markdownRemark":{"id":"e9c9596a-6e95-5a84-8776-537e4f4aba53","excerpt":"前提条件 この記事は前半と後半に分かれてます。 Macでしか検証していません VS Codeを使うことが前提です。 phpcsでWordPressコーディング規約導入したい方はWordPress phpcsでコーディング規約を守る環境を作るへ WordPressの各言語ごとのコーディング規約 WordPress…","html":"<h2 id=\"前提条件\">前提条件</h2>\n<p>この記事は前半と後半に分かれてます。</p>\n<ul>\n<li>Macでしか検証していません</li>\n<li>VS Codeを使うことが前提です。</li>\n<li>phpcsでWordPressコーディング規約導入したい方は<a href=\"/blogs/entry450/\">WordPress phpcsでコーディング規約を守る環境を作る</a>へ</li>\n</ul>\n<h3 id=\"wordpressの各言語ごとのコーディング規約\">WordPressの各言語ごとのコーディング規約</h3>\n<p>WordPressにもコーディング規約があって、各言語ごとにまとめられています。気分が萎える。。。</p>\n<ul>\n<li><a href=\"https://ja.wordpress.org/team/handbook/coding-standards/wordpress-coding-standards/html/\">html</a></li>\n<li><a href=\"https://ja.wordpress.org/team/handbook/coding-standards/wordpress-coding-standards/css/\">css</a></li>\n<li><a href=\"https://ja.wordpress.org/team/handbook/coding-standards/wordpress-coding-standards/javascript/\">JavaScript</a></li>\n<li><a href=\"https://ja.wordpress.org/team/handbook/coding-standards/wordpress-coding-standards/php/\">PHP</a></li>\n</ul>\n<h2 id=\"ファイルの整形\">ファイルの整形</h2>\n<p>WordPressにはheader.phpなどのテンプレファイルがあります。</p>\n<p>過去に書いた404ページですが見事に真っ赤になりました。誰だ、こんなクソコード書いたやつ。。。<strong>お前だよ！！！</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.177215189873415%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAcWCBP8A/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQIVH/2gAIAQEAAT8hbWFR/9oADAMBAAIAAwAAABCED//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAIDAQAAAAAAAAAAAAAAAAABEVFxkf/aAAgBAQABPxDX0mj6S7P/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8ffb21873a38bc5e865c363ca71fa85a/81b7c/entry450-6.webp 158w,\n/static/8ffb21873a38bc5e865c363ca71fa85a/6ea66/entry450-6.webp 315w,\n/static/8ffb21873a38bc5e865c363ca71fa85a/8aab1/entry450-6.webp 630w,\n/static/8ffb21873a38bc5e865c363ca71fa85a/60055/entry450-6.webp 888w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8ffb21873a38bc5e865c363ca71fa85a/ff44c/entry450-6.jpg 158w,\n/static/8ffb21873a38bc5e865c363ca71fa85a/a6688/entry450-6.jpg 315w,\n/static/8ffb21873a38bc5e865c363ca71fa85a/828fb/entry450-6.jpg 630w,\n/static/8ffb21873a38bc5e865c363ca71fa85a/bf093/entry450-6.jpg 888w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8ffb21873a38bc5e865c363ca71fa85a/828fb/entry450-6.jpg\"\n            alt=\"誰だ、こんなクソコード書いたやつ。。。お前だよ！！！\"\n            title=\"誰だ、こんなクソコード書いたやつ。。。お前だよ！！！\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>赤い箇所にカーソルを当てるとエラーがわかります。ただし英語です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 527px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.025316455696203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAcmRIE//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAAAUH/2gAIAQEAAT8hyMV//9oADAMBAAIAAwAAABD0D//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAAMBAQAAAAAAAAAAAAAAAAABETFB/9oACAEBAAE/EIrTiHsZ3T//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5e25495f1766ccd8221847daf4556f75/81b7c/entry450-9.webp 158w,\n/static/5e25495f1766ccd8221847daf4556f75/6ea66/entry450-9.webp 315w,\n/static/5e25495f1766ccd8221847daf4556f75/042cc/entry450-9.webp 527w\"\n              sizes=\"(max-width: 527px) 100vw, 527px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5e25495f1766ccd8221847daf4556f75/ff44c/entry450-9.jpg 158w,\n/static/5e25495f1766ccd8221847daf4556f75/a6688/entry450-9.jpg 315w,\n/static/5e25495f1766ccd8221847daf4556f75/50112/entry450-9.jpg 527w\"\n            sizes=\"(max-width: 527px) 100vw, 527px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5e25495f1766ccd8221847daf4556f75/50112/entry450-9.jpg\"\n            alt=\"Tabs must be used to indent lines; spaces are not allowed. ~ タブを使用してください。スペースは許可されてません ~\"\n            title=\"Tabs must be used to indent lines; spaces are not allowed. ~ タブを使用してください。スペースは許可されてません ~\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<blockquote>\n<p>Tabs must be used to indent lines; spaces are not allowed. ~ タブを使用してください。スペースは許可されていません~</p>\n</blockquote>\n<p>Google翻訳にかければ理解できると思うのですが、9割くらいはインデントやスペースの使い方のエラーです。</p>\n<p>インデントやスペースのエラーは<a href=\"/blogs/entry450/\">WordPress phpcsでコーディング規約を守る環境を作る</a>で環境設定した自動フォーマッターを適応するだけで<em>ほぼほぼ解決</em>します。</p>\n<p>フォーマッター使用後も多少コードが乱れることもあるので手直しは必要です。</p>\n<p>それでも困ったらエラーを読み解くか、<a href=\"https://ja.wordpress.org/team/handbook/coding-standards/wordpress-coding-standards/php/\">WordPressコード規約（PHP）</a>で調べます。</p>\n<p>もし入れてない場合は、スペースをタブ変換します。WordPressのインデントはハードタブ（4つ）です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcaSgT//xAAVEAEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQJr/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAFRABAQAAAAAAAAAAAAAAAAAAIGH/2gAIAQEAAT8hhf/aAAwDAQACAAMAAAAQQx//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAQIXGRscH/2gAIAQEAAT8QIAjxGxnqPXFKv//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f4df427144075f34df042a1a6433f9f3/81b7c/entry450-7.webp 158w,\n/static/f4df427144075f34df042a1a6433f9f3/6ea66/entry450-7.webp 315w,\n/static/f4df427144075f34df042a1a6433f9f3/8aab1/entry450-7.webp 630w,\n/static/f4df427144075f34df042a1a6433f9f3/dafe9/entry450-7.webp 926w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f4df427144075f34df042a1a6433f9f3/ff44c/entry450-7.jpg 158w,\n/static/f4df427144075f34df042a1a6433f9f3/a6688/entry450-7.jpg 315w,\n/static/f4df427144075f34df042a1a6433f9f3/828fb/entry450-7.jpg 630w,\n/static/f4df427144075f34df042a1a6433f9f3/aefc3/entry450-7.jpg 926w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f4df427144075f34df042a1a6433f9f3/828fb/entry450-7.jpg\"\n            alt=\"誰だ、こんなクソコード書いたやつ。。。お前だよ！！！\"\n            title=\"誰だ、こんなクソコード書いたやつ。。。お前だよ！！！\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"よく遭遇するエラーと対処法\">よく遭遇するエラーと対処法</h2>\n<p>よく遭遇するエラーをケース別にまとめます。</p>\n<h3 id=\"missing-file-doc-commentファイルに説明追加\">Missing file doc comment/ファイルに説明追加</h3>\n<p>WordPressのコーディング規約ではファイルの冒頭にミニマムでファイルの説明を入れる必要があります。</p>\n<p>何のパッケージに含まれるかも必須です。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">/**\n * This is 404 page（ページの説明。英語の場合は頭文字は大文字から）\n *\n * @package theme-name（パッケージ名）\n */</span>\n\n<span class=\"token comment\">/** こっからコード\n*/</span></span></code></pre></div>\n<p>コードとコメントは一行空けます。</p>\n<p>コメントは<code class=\"language-text\">/**</code>と入力すると以下のように展開されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">/**\n *\n */</span></code></pre></div>\n<p>理想のコメント。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">/**\n * ファイルのタイトル\n *\n * ファイルの説明.\n *\n * @category   Components\n * @package    WordPress\n * @subpackage テーマ名\n * @author     名前 &lt;foo.bar@example.com>\n * @license    https://www.gnu.org/licenses/gpl-3.0.txt GNU/GPLv3\n * @link       https://example.com\n * @since      1.0.0\n */</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.89873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAQAF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAcUhGKf/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAADAQEAAAAAAAAAAAAAAAABEBEAQf/aAAgBAQABPyGXo0Rf/9oADAMBAAIAAwAAABD0z//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAAcAAAAAAAAAAAAAAAEAERAhMUFhgfD/2gAIAQEAAT8QyrA4WKNzpleua8f/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e0bc5a856a1b10246d0e5a128037c72a/81b7c/entry450-8.webp 158w,\n/static/e0bc5a856a1b10246d0e5a128037c72a/6ea66/entry450-8.webp 315w,\n/static/e0bc5a856a1b10246d0e5a128037c72a/8aab1/entry450-8.webp 630w,\n/static/e0bc5a856a1b10246d0e5a128037c72a/d5234/entry450-8.webp 771w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e0bc5a856a1b10246d0e5a128037c72a/ff44c/entry450-8.jpg 158w,\n/static/e0bc5a856a1b10246d0e5a128037c72a/a6688/entry450-8.jpg 315w,\n/static/e0bc5a856a1b10246d0e5a128037c72a/828fb/entry450-8.jpg 630w,\n/static/e0bc5a856a1b10246d0e5a128037c72a/87315/entry450-8.jpg 771w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e0bc5a856a1b10246d0e5a128037c72a/828fb/entry450-8.jpg\"\n            alt=\"インデントを整えたらスッキリエラーから解放\"\n            title=\"インデントを整えたらスッキリエラーから解放\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h3 id=\"missing-doc-comment-for-function-関数名関数に説明追加\">Missing doc comment for function 関数名/関数に説明追加</h3>\n<p>function.php内で発生しがちの関数系のエラーです。</p>\n<p>関数説明の追加は拡張機能の<em>PHP DocBlocker</em>を入れておくと便利です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHLqEiJ/8QAFhAAAwAAAAAAAAAAAAAAAAAAEBFB/9oACAEBAAEFAox//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEABj8CW//EABkQAQACAwAAAAAAAAAAAAAAAAERIQAQUf/aAAgBAQABPyGowEcxpr//2gAMAwEAAgADAAAAEAQP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAECAQE/EDV//8QAGBABAAMBAAAAAAAAAAAAAAAAAQAQIZH/2gAIAQEAAT8Q0xUADIihDlf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5146ca0da320516a3e980214e2124d7a/81b7c/entry450-10.webp 158w,\n/static/5146ca0da320516a3e980214e2124d7a/6ea66/entry450-10.webp 315w,\n/static/5146ca0da320516a3e980214e2124d7a/8aab1/entry450-10.webp 630w,\n/static/5146ca0da320516a3e980214e2124d7a/02aff/entry450-10.webp 790w\"\n              sizes=\"(max-width: 630px) 100vw, 630px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5146ca0da320516a3e980214e2124d7a/ff44c/entry450-10.jpg 158w,\n/static/5146ca0da320516a3e980214e2124d7a/a6688/entry450-10.jpg 315w,\n/static/5146ca0da320516a3e980214e2124d7a/828fb/entry450-10.jpg 630w,\n/static/5146ca0da320516a3e980214e2124d7a/b1591/entry450-10.jpg 790w\"\n            sizes=\"(max-width: 630px) 100vw, 630px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5146ca0da320516a3e980214e2124d7a/828fb/entry450-10.jpg\"\n            alt=\"説明の追加は拡張機能のPHP DocBlocker\"\n            title=\"説明の追加は拡張機能のPHP DocBlocker\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>関数を書いた後に関数の上で<code class=\"language-text\">/**</code>コメント展開したら以下追記されるので、適宜リライトしてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">/**\n * Undocumented function\n *\n * @param [type] $arg\n * @return void\n */</span></code></pre></div>\n<p>必ず冒頭になんの関数か説明を追記してください。</p>\n<p>テンプレートファイルの説明と違って、コメントと関数を続けて記述します。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">/**\n * 説明\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">my_function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token variable\">$hogehoge</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>補足ですが、通常一般的なPHP（PSR2など）では<code class=\"language-text\">{</code>を改行するのに対し一行で書くのがWordPress仕様です。この辺はフォーマッターで解決できます。</p>\n<p>引数がある場合はその説明の追記も必要です。引数の説明を終わらせるために<code class=\"language-text\">.(ピリオド)</code>を打つ必要があります。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">/**\n * 説明\n *\n * @param string $value は値です.\n * @param string $name is name.\n * @return $hogehoge\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function-definition function\">my_function</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$value</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$name</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$hogehoge</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"phpcsで気づいたwordpress-ngコード\">phpcsで気づいたWordPress NGコード</h2>\n<p>phpceを導入してNGコードにたくさん気づけたので抜粋しておきます！</p>\n<h3 id=\"変数のecho書き出しはng\">変数のecho書き出しはNG</h3>\n<p><code class=\"language-text\">echo</code>出力やりがちなんですが、まんま出力はセキュリティ上NGです。</p>\n<p>phpcsでコード書いてるとここら辺も怒られます。</p>\n<blockquote>\n<p>All output should be run through an escaping function (see the Security sections in the WordPress Developer Handbooks)</p>\n</blockquote>\n<p>なのでエスケープ処理（除去）をかませます。他にもありますが、よく使う3このみ抜粋。</p>\n<table>\n<thead>\n<tr>\n<th>関数</th>\n<th>説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">esc_html()</code></td>\n<td>htmlタグをエスケープ</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">esc_url()</code></td>\n<td>URLのプロトコルのチェックや適切でない文字をエスケープ</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">wp_attr()</code></td>\n<td>&#x3C; > &#x26; ” ’ (小なり、大なり、アンパサンド、ダブルクォート、シングルクォート) 文字参照をエンコード</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">wp_kses()</code></td>\n<td>特定のタグと属性の出力以外エスケープ</td>\n</tr>\n</tbody>\n</table>\n<p>たとえば、<code class=\"language-text\">get_the_title()</code>で取得した投稿内容を<code class=\"language-text\">echo</code>出力したい場合はこんな感じです。</p>\n<p><code class=\"language-text\">get_~()</code>系の関数出力はすべてエスケープ処理が必要だと思っておいてもいいくらいです。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">echo</span> <span class=\"token function\">esc_html</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_the_title</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>URLではこんな感じで使います。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;?php echo esc_url( home_url(<span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span>) ); <span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>ホーム<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>属性のエスケープ例。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;?php echo esc_attr( $title ); <span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><br>特定のタグや属性だけ残したいときはこんな感じ。</p>\n<p>brタグだけスリップできます。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$address</span> <span class=\"token operator\">=</span> <span class=\"token function\">nl2br</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$address</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">wp_kses</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$address</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'br'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>長くなる場合はまとめるといいかもです。属性はタグの<code class=\"language-text\">array</code>内に記述します。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$allowed_html</span>  <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t<span class=\"token string single-quoted-string\">'iframe'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token string single-quoted-string\">'src'</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iframe<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">wp_kses</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$get_map</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$allowed_tags</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"ミスを避けるためヨーダ記法をゴリ押しされる\">ミスを避けるためヨーダ記法をゴリ押しされる</h3>\n<blockquote>\n<p>Use Yoda Condition checks, you must.</p>\n</blockquote>\n<p>if文でヨーダ記法といって値を先に書く方法があります。</p>\n<p>いわゆる倒置法。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token number\">3</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$yoda</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/*\n * 続き\n*/</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>変数の代入と間違えてif文を書来がちなのでこの記法で書けと言われますが、たまにしか間違えんです汗</p>\n<h4 id=\"後から大量にヨーダ記法に書き換えるのが辛い人へ。奥の手置換\">後から大量にヨーダ記法に書き換えるのが辛い人へ。奥の手置換</h4>\n<p>ちなみに私は大量のヨーダ記法への書き換えが辛かったです。途中で気づいて置換しました。こちらにやり方を記載しました。</p>\n<a class=\"article-link\" href=\"/blogs/entry336/\">\n<section><div class=\"article-link__img\"><img alt=\"VS Codeでカンタン！正規表現置換のためのチートシート\" src=\"/static/8ecf37b123c8696efad17b0e505e7e82/f836f/entry336.jpg\" width=\"150\" height=\"113\" class=\"\"></div><div class=\"article-link__main\">\n<div class=\"article-link__main__title\">VS Codeでカンタン！正規表現置換のためのチートシート</div>\n<p class=\"description\">コードをいわゆる「置換（置き換え）」、一気に変換したい！ってときありませんか？「正規表現」を使うと･･</p>\n<p>\n<time datetime=\"2019-07-21\">2019.07.21</time>\n</p>\n</div>\n</section></a>\n<h3 id=\"演算子は厳格に使え！\">演算子は厳格に使え！</h3>\n<p>これは当たり前っちゃ当たり前なんですが、うっかり間違えて<code class=\"language-text\">==</code>とか<code class=\"language-text\">!=</code>、使っちゃいます。</p>\n<blockquote>\n<p>Found: ==. Use strict comparisons (=== or !==).</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$neko</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$cat</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/*\n * 続き\n*/</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$inu</span> <span class=\"token operator\">!==</span> <span class=\"token variable\">$cat</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">/*\n * 続き\n*/</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ショートタグから取得したタグは<code class=\"language-text\">true</code>や<code class=\"language-text\">false</code>がboolean（論理型）からstring（文字列）に変換されているので、文字列として判定する必要があります。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'true'</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$cat</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"配列はじゃなくarrayで書け！\">配列は[]じゃなくarrayで書け！</h3>\n<blockquote>\n<p>Short array syntax is not allowedphpcs</p>\n</blockquote>\n<p>[]で書くほうがモダンだと思いきや、使用NG。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token class-name type-declaration\">NG</span>\n<span class=\"token variable\">$array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name type-declaration\">OK</span>\n<span class=\"token variable\">$array</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"キャメルケースはng！\">キャメルケースはNG！</h3>\n<p>JS書いてるとついついうっかりキャメルケース書いてしまいますがNGです。</p>\n<p>変数名や関数名はスネークケースで書きます。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token class-name type-declaration\">NG</span>\n<span class=\"token variable\">$metaDescription</span>\n<span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token class-name type-declaration\">OK</span>\n<span class=\"token variable\">$meta_description</span>\n<span class=\"token function\">my_function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"ループ条件内で関数を使うな\">ループ条件内で関数を使うな</h3>\n<blockquote>\n<p>the use of count() inside a loop condition is not allowed; assign the return value to a variable and use the variable in the loop condition instead.</p>\n</blockquote>\n<p>ループ条件内での<code class=\"language-text\">count()</code>（配列を数える関数）をまんま使ったら怒られました。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token constant\">NG</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">&lt;=</span>  <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$array</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span><span class=\"token variable\">$i</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t処理\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name type-declaration\">OK</span>\n<span class=\"token variable\">$cnt</span> <span class=\"token operator\">=</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$array</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token variable\">$i</span> <span class=\"token operator\">&lt;=</span> <span class=\"token variable\">$cnt</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span><span class=\"token variable\">$i</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t処理\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ショートコードの引数の書き方注意\">ショートコードの引数の書き方注意</h3>\n<p>ショートコードで使っていた鉄板の<code class=\"language-text\">extract()</code>は使用を推奨されていないようです。</p>\n<p>古い書き方も注意されるので、発見があります。</p>\n<blockquote>\n<p>extract() usage is highly discouraged, due to the complexity and unintended issues it might cause. ~ extractは非常にオススメできません。複雑な問題（多分バグ）があるから使わない方がいいです。~</p>\n</blockquote>\n<p>代替コードはこちらです。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">show_archives</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$atts</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token variable\">$atts</span> <span class=\"token operator\">=</span> <span class=\"token function\">shortcode_atts</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token string single-quoted-string\">'order'</span>       <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'DESC'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string single-quoted-string\">'type'</span>        <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'post'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string single-quoted-string\">'cnt'</span>         <span class=\"token operator\">=></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string single-quoted-string\">'author_name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'0'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string single-quoted-string\">'pager'</span>       <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string single-quoted-string\">'slider'</span>      <span class=\"token operator\">=></span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token variable\">$atts</span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//省略</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>こんな感じで値を取得します。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$atts</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'order'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"登録（crud）系\">登録（CRUD）系</h2>\n<p><code class=\"language-text\">update_post_meta()</code>などカスタムフィールドからデータを保存したいとき、そのまま書くとエラーがコンボします。</p>\n<blockquote>\n<p>An associative array of variables passed to the current script via the HTTP POST method.<br>\n<code class=\"language-text\">$_POST</code> data not unslashed before sanitization. <code class=\"language-text\">Use wp_unslash()</code> or similar<br>\nDetected usage of a non-sanitized input variable:<br>\nProcessing form data without nonce verification</p>\n</blockquote>\n<p><code class=\"language-text\">wp_unslash</code>で値からスラッシュを取りぞき。<code class=\"language-text\">sanitize_text_field</code>で入力テキストを無害化します。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token function\">sanitize_text_field</span><span class=\"token punctuation\">(</span> <span class=\"token function\">wp_unslash</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'title'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>判定は<code class=\"language-text\">isset()</code>や<code class=\"language-text\">empty()</code>を使います。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span> <span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'title'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//処理</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'title'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//処理</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Processing form data without nonce verification.</p>\n</blockquote>\n<p>$_GET`での判定です。</p>\n<p>クエリ自体を登録し<code class=\"language-text\">get_query_var</code>で取得できるようにしておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">add_query_vars_filter</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$vars</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token variable\">$vars</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'test'</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$vars</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add_filter</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'query_vars'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'add_query_vars_filter'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ここら辺の検証は何よりもWordPress Codexが参考になりました。Codexサイコー！</p>\n<p><a href=\"https://wpdocs.osdn.jp/%E3%83%87%E3%83%BC%E3%82%BF%E6%A4%9C%E8%A8%BC\">データ検証</a></p>\n<h2 id=\"どうしようもないエラーを非表示にしたい\">どうしようもないエラーを非表示にしたい</h2>\n<p>やりたくないけど、どうしてもチェックを無視したいときは以下を使います。</p>\n<h3 id=\"一部無効（私はどうしてもの時基本これしか使いません）。\">一部無効（私はどうしてもの時基本これしか使いません）。</h3>\n<p>たとえばです。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// @codingStandardsIgnoreStart</span>\n<span class=\"token variable\">$test</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'test'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// @codingStandardsIgnoreEnd</span></code></pre></div>\n<p><code class=\"language-text\">$_GET</code>や<code class=\"language-text\">$_POST</code>系のエスケープに関しては<a href=\"#%E5%85%A5%E5%8A%9B%E7%B3%BB\">入力系</a>を参考にしてください。</p>\n<h3 id=\"ファイルまるごと無視\">ファイルまるごと無視</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// @codingStandardsIgnoreFile</span></span></code></pre></div>\n<h3 id=\"フォルダー丸ごと無視\">フォルダー丸ごと無視</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">phpcs --ignore=*/tests/*,*/data/* /path/to/code</code></pre></div>\n<h2 id=\"まとめ・規約に添えば正しいコードが書けるようになる\">まとめ・規約に添えば正しいコードが書けるようになる</h2>\n<p>他にもたくさんエラーに見舞われたのですが大量すぎて忘れました。</p>\n<p>気づいたら追記します。</p>\n<p>英語のエラー潰しはツライはず。ぜひこの記事を参考にしてWordPressコーディングライフを楽しんでください。</p>\n<p>最後までお読みいただきありがとうございました。</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6\">前提条件</a></p>\n<ul>\n<li><a href=\"#wordpress%E3%81%AE%E5%90%84%E8%A8%80%E8%AA%9E%E3%81%94%E3%81%A8%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E8%A6%8F%E7%B4%84\">WordPressの各言語ごとのコーディング規約</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E6%95%B4%E5%BD%A2\">ファイルの整形</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%88%E3%81%8F%E9%81%AD%E9%81%87%E3%81%99%E3%82%8B%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%A8%E5%AF%BE%E5%87%A6%E6%B3%95\">よく遭遇するエラーと対処法</a></p>\n<ul>\n<li><a href=\"#missing-file-doc-comment%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E8%AA%AC%E6%98%8E%E8%BF%BD%E5%8A%A0\">Missing file doc comment/ファイルに説明追加</a></li>\n<li><a href=\"#missing-doc-comment-for-function-%E9%96%A2%E6%95%B0%E5%90%8D%E9%96%A2%E6%95%B0%E3%81%AB%E8%AA%AC%E6%98%8E%E8%BF%BD%E5%8A%A0\">Missing doc comment for function 関数名/関数に説明追加</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#phpcs%E3%81%A7%E6%B0%97%E3%81%A5%E3%81%84%E3%81%9Fwordpress-ng%E3%82%B3%E3%83%BC%E3%83%89\">phpcsで気づいたWordPress NGコード</a></p>\n<ul>\n<li>\n<p><a href=\"#%E5%A4%89%E6%95%B0%E3%81%AEecho%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97%E3%81%AFng\">変数のecho書き出しはNG</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%83%9F%E3%82%B9%E3%82%92%E9%81%BF%E3%81%91%E3%82%8B%E3%81%9F%E3%82%81%E3%83%A8%E3%83%BC%E3%83%80%E8%A8%98%E6%B3%95%E3%82%92%E3%82%B4%E3%83%AA%E6%8A%BC%E3%81%97%E3%81%95%E3%82%8C%E3%82%8B\">ミスを避けるためヨーダ記法をゴリ押しされる</a></p>\n<ul>\n<li><a href=\"#%E5%BE%8C%E3%81%8B%E3%82%89%E5%A4%A7%E9%87%8F%E3%81%AB%E3%83%A8%E3%83%BC%E3%83%80%E8%A8%98%E6%B3%95%E3%81%AB%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88%E3%82%8B%E3%81%AE%E3%81%8C%E8%BE%9B%E3%81%84%E4%BA%BA%E3%81%B8%E3%80%82%E5%A5%A5%E3%81%AE%E6%89%8B%E7%BD%AE%E6%8F%9B\">後から大量にヨーダ記法に書き換えるのが辛い人へ。奥の手置換</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E6%BC%94%E7%AE%97%E5%AD%90%E3%81%AF%E5%8E%B3%E6%A0%BC%E3%81%AB%E4%BD%BF%E3%81%88%EF%BC%81\">演算子は厳格に使え！</a></p>\n</li>\n<li>\n<p><a href=\"#%E9%85%8D%E5%88%97%E3%81%AF%E3%81%98%E3%82%83%E3%81%AA%E3%81%8Farray%E3%81%A7%E6%9B%B8%E3%81%91%EF%BC%81\">配列は[]じゃなくarrayで書け！</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%AD%E3%83%A3%E3%83%A1%E3%83%AB%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%AFng%EF%BC%81\">キャメルケースはNG！</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%83%AB%E3%83%BC%E3%83%97%E6%9D%A1%E4%BB%B6%E5%86%85%E3%81%A7%E9%96%A2%E6%95%B0%E3%82%92%E4%BD%BF%E3%81%86%E3%81%AA\">ループ条件内で関数を使うな</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E5%BC%95%E6%95%B0%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9%E6%B3%A8%E6%84%8F\">ショートコードの引数の書き方注意</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E7%99%BB%E9%8C%B2%EF%BC%88crud%EF%BC%89%E7%B3%BB\">登録（CRUD）系</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%81%A9%E3%81%86%E3%81%97%E3%82%88%E3%81%86%E3%82%82%E3%81%AA%E3%81%84%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E9%9D%9E%E8%A1%A8%E7%A4%BA%E3%81%AB%E3%81%97%E3%81%9F%E3%81%84\">どうしようもないエラーを非表示にしたい</a></p>\n<ul>\n<li><a href=\"#%E4%B8%80%E9%83%A8%E7%84%A1%E5%8A%B9%EF%BC%88%E7%A7%81%E3%81%AF%E3%81%A9%E3%81%86%E3%81%97%E3%81%A6%E3%82%82%E3%81%AE%E6%99%82%E5%9F%BA%E6%9C%AC%E3%81%93%E3%82%8C%E3%81%97%E3%81%8B%E4%BD%BF%E3%81%84%E3%81%BE%E3%81%9B%E3%82%93%EF%BC%89%E3%80%82\">一部無効（私はどうしてもの時基本これしか使いません）。</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%BE%E3%82%8B%E3%81%94%E3%81%A8%E7%84%A1%E8%A6%96\">ファイルまるごと無視</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC%E4%B8%B8%E3%81%94%E3%81%A8%E7%84%A1%E8%A6%96\">フォルダー丸ごと無視</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E3%83%BB%E8%A6%8F%E7%B4%84%E3%81%AB%E6%B7%BB%E3%81%88%E3%81%B0%E6%AD%A3%E3%81%97%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%81%8C%E6%9B%B8%E3%81%91%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8B\">まとめ・規約に添えば正しいコードが書けるようになる</a></p>\n</li>\n</ul>","frontmatter":{"title":"WordPress phpcsでコーディング規約を守るコード","date":"2021.04.05","description":"この記事はWordPressコーディング規約をphpcs導入して入れたものの、エラー英語だしよくわかんないって嘆いている人向けの記事です。ありがちなエラーの回避方法をまとめました。","lead":["この記事はWordPressのコーディング規約をphpcs導入して入れたものの、エラー英語だしよくわかんないって嘆いている人向けの記事です。ありがちなエラーの回避方法をまとめました。"],"hero":"2021/entry452.jpg","cateId":"cms","tags":["WordPress","VS Code","PHP"],"pagetype":"blog","modifieddate":null}},"previous":{"fields":{"slug":"/blogs/entry451/"},"frontmatter":{"title":"銀ねこアトリエSEO対策レポート ~半年間を振り返る~"}},"next":{"fields":{"slug":"/blogs/entry453/"},"frontmatter":{"title":"憧れの海外ノマドワーカー。未経験でもエンジニアでもなれるの？"}}},"pageContext":{"id":"e9c9596a-6e95-5a84-8776-537e4f4aba53","previousPostId":"c8839697-4d1d-54a8-a2a5-3a0884e93928","nextPostId":"5931deae-fa1f-5ddc-9945-755df006689d","hero":"2021/entry452.jpg"}}