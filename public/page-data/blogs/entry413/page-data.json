{"componentChunkName":"component---src-templates-blog-post-js","path":"/blogs/entry413/","result":{"data":{"site":{"siteMetadata":{"title":"銀ねこアトリエ"}},"allFile":{"edges":[{"node":{"name":"entry401","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8e8d8","images":{"fallback":{"src":"/static/206512c4ac54a09bce7ea7c2b867aeaa/018b3/entry401.jpg","srcSet":"/static/206512c4ac54a09bce7ea7c2b867aeaa/15952/entry401.jpg 375w,\n/static/206512c4ac54a09bce7ea7c2b867aeaa/018b3/entry401.jpg 640w","sizes":"(min-width: 640px) 640px, 100vw"},"sources":[{"srcSet":"/static/206512c4ac54a09bce7ea7c2b867aeaa/fd9fd/entry401.webp 375w,\n/static/206512c4ac54a09bce7ea7c2b867aeaa/66a24/entry401.webp 640w","type":"image/webp","sizes":"(min-width: 640px) 640px, 100vw"}]},"width":640,"height":480}}}}]},"markdownRemark":{"id":"c42d7ea1-69ed-5ce7-9bb0-3f67cdf8a551","excerpt":"今までのGatsbyの記事と注意点 現在ここまで記載しています。制作するまでを目標にUPしていくので順を追ったらGatsbyサイトが作れると思います。 インストールからNetlify…","html":"<h2 id=\"今までのgatsbyの記事と注意点\">今までのGatsbyの記事と注意点</h2>\n<p>現在ここまで記載しています。<br>制作するまでを目標にUPしていくので順を追ったらGatsbyサイトが作れると思います。</p>\n<ol>\n<li><a href=\"/blogs/entry401/\">インストールからNetlifyデプロイまで</a></li>\n<li><a href=\"/blogs/entry406/\">投稿ページの充実と画像の方法</a></li>\n<li><a href=\"/blogs/entry408/\">ブログ記事、カテゴリー、タグ一覧の出力</a></li>\n<li><a href=\"/blogs/entry410/\">プラグインを利用して目次出力</a></li>\n<li>プラグインナシで一覧にページネーション実装（←イマココ）</li>\n<li><a href=\"/blogs/entry416/\">個別ページテンプレート作成</a></li>\n<li><a href=\"/blogs/entry418/\">プラグインHelmetでSEO調整</a></li>\n<li><a href=\"/blogs/entry421/\">CSSコンポーネントでオリジナルページを作ろう！！</a></li>\n<li><a href=\"/blogs/entry430/\">関連記事一覧出力</a></li>\n</ol>\n<h3 id=\"このシリーズではテーマgatsby-starter-blogを改造\">このシリーズではテーマGatsby Starter Blogを改造</h3>\n<p>この記事は一番メジャーなテンプレート、「<em>Gatsby Starter Blog</em>」を改造しています。同じテーマでないと動かない可能性があります。</p>\n<h2 id=\"早速ページネーションを実装しよう！\">早速ページネーションを実装しよう！</h2>\n<p>ページネーションを実装するためには一覧を分割しページを生成します。<br>\nさらにページネーションを出力するコンポーネントを作成します。</p>\n<p>WordPressなど、その他のCMSに慣れていると<em>一覧を分割しページを生成するってところがちょっと不思議</em>です。</p>\n<h3 id=\"ページネーションを実装するためにページを分割する\">ページネーションを実装するためにページを分割する</h3>\n<p>まずはgatsby-node.jsにページを分割するためのコードを書いていきます。</p>\n<p>一覧ページの実装の仕方についてはこちらを参考にしてください。</p>\n<a class=\"article-link\" href=\"/blogs/entry408/\">\n<section><div class=\"article-link__img\"><img alt=\"実用性重視！使えるボタンのCSSコード・スニペット集！\" src=\"/static/206512c4ac54a09bce7ea7c2b867aeaa/f836f/entry401.jpg\" width=\"150\" height=\"113\" class=\"\"></div><div class=\"article-link__main\">\n<div class=\"article-link__main__title\">Gatsbyブログサイト移行物語3~ブログ記事、カテゴリー、タグ一覧の出力~</div>\n<p class=\"description\">gatsbyのブログ用記事を抽出し一覧を作りました。カテゴリー、タグ一覧もぞれぞれ用意したのでだいぶ使い勝手がよ･･･</p>\n<p>\n<time datetime=\"2020-12-03\">2020.12.03</time>\n</p>\n</div>\n</section>\n</a>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/ (プロジェクトディレクトリー)\n    ├ gatsby-node.js（ページを生成するところ）\n    ├ src/\n    |    ├ templates/\n    |    |   └ blogs.js（一覧を出力するところ）\n    └ components/\n         └ pagination.js（新規作成）</code></pre></div>\n<p><br>gatsby-node.jsのブログ詳細ページを生成しているコードを利用して、数量を数えます。<br>\n変数<code class=\"language-text\">count</code>にページ数を格納します。</p>\n<p>frontmatterのpagetypeがblogのみカウントします。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ~ 省略 ~</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> reporter <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ~ 省略 ~</span>\n\n  <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token comment\">//追加</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//ブログ詳細ページを生成しているコード</span>\n    posts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>pagetype <span class=\"token operator\">===</span> <span class=\"token string\">'blog'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> previousPostId <span class=\"token operator\">=</span> index <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> posts<span class=\"token punctuation\">[</span>index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id\n        <span class=\"token keyword\">const</span> nextPostId <span class=\"token operator\">=</span> index <span class=\"token operator\">===</span> posts<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">:</span> posts<span class=\"token punctuation\">[</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id\n\n        <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          path<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n          component<span class=\"token operator\">:</span> blogPost<span class=\"token punctuation\">,</span>\n          context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            id<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n            previousPostId<span class=\"token punctuation\">,</span>\n            nextPostId<span class=\"token punctuation\">,</span>\n            hero<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>hero<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        count<span class=\"token operator\">++</span> <span class=\"token comment\">//追加</span>\n      <span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// ~ 省略 ~</span>\n\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ~ 省略 ~</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br>続けて以下のコードを追記します。今回は1ページに12記事を表示します。</p>\n<p>contextに値を追加します。</p>\n<p><code class=\"language-text\">limit</code>はループ数、<code class=\"language-text\">skip</code>はオフセット（どこからループを始めるか）数です。</p>\n<p><code class=\"language-text\">current</code>には現在どのページを表示しているか値を格納し、<code class=\"language-text\">page</code>にはトータルのページ数を格納します。</p>\n<p>これで一覧ページのテンプレートpages.jsに各値を渡せます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token comment\">// ~ 省略 ~</span>\n  count<span class=\"token operator\">++</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// ここから</span>\n<span class=\"token keyword\">const</span> postsPerPage <span class=\"token operator\">=</span> <span class=\"token number\">12</span> <span class=\"token comment\">//追加</span>\n<span class=\"token keyword\">let</span> numPages <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">/</span> postsPerPage<span class=\"token punctuation\">)</span> <span class=\"token comment\">//追加</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> index <span class=\"token operator\">&lt;</span> numPages<span class=\"token punctuation\">;</span> index<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">withPrefix</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">pageNumber</span> <span class=\"token operator\">=></span> pageNumber <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blogs/</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blogs/page/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pageNumber<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token comment\">//追加</span>\n  <span class=\"token keyword\">const</span> pageNumber <span class=\"token operator\">=</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token comment\">//追加</span>\n\n  <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> <span class=\"token function\">withPrefix</span><span class=\"token punctuation\">(</span>pageNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//修正</span>\n    component<span class=\"token operator\">:</span> blogList<span class=\"token punctuation\">,</span>\n    context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      limit<span class=\"token operator\">:</span> postsPerPage<span class=\"token punctuation\">,</span> <span class=\"token comment\">//追加</span>\n      skip<span class=\"token operator\">:</span> index <span class=\"token operator\">*</span> postsPerPage<span class=\"token punctuation\">,</span> <span class=\"token comment\">//追加</span>\n      current<span class=\"token operator\">:</span> pageNumber<span class=\"token punctuation\">,</span> <span class=\"token comment\">//追加</span>\n      page<span class=\"token operator\">:</span> numPages<span class=\"token punctuation\">,</span> <span class=\"token comment\">//追加</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br>こんなまどろっこしいコードを書かなくても、構造によっては<code class=\"language-text\">posts.length</code>で記事数を取得できます。</p>\n<p>私の場合mdファイルの出力をループするもの（一覧出力）とそうでないもので分けています。なので、タイプ分けする必要のない人は<code class=\"language-text\">let count = 0</code>も<code class=\"language-text\">count++</code>も必要ありません。<br><br></p>\n<p><code class=\"language-text\">let count = 0</code>をこちらのコードに差し替えてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">\n<span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> posts<span class=\"token punctuation\">.</span>length</code></pre></div>\n<h3 id=\"pagesjsで値を受け取る\">pages.jsで値を受け取る</h3>\n<p>次にpages.js側で値を受け取ります。</p>\n<p><code class=\"language-text\">query blosQyery()</code>に<code class=\"language-text\">$limit: Int!</code>と<code class=\"language-text\">$skip: Int!</code>を追加します。</p>\n<p><code class=\"language-text\">Int!</code>は型が<em>数字で空の値はダメですよー</em>って意味です。空でもいい場合は<code class=\"language-text\">!</code>を省きます。</p>\n<p><code class=\"language-text\">Int!</code>が原因でエラーを吐いている場合は、gatyby-node.js側で間違ったコードを書いている可能性があるのでよく確かめてみましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token comment\">// ~ 省略 ~</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">blogs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//なければpageContextを追加</span>\n  <span class=\"token comment\">// ~ 省略 ~</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> blogs\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query blosQyery(\n    $limit: Int!\n      $skip: Int!\n    ) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(\n      limit: $limit\n      skip: $skip\n      sort: {fields: [frontmatter___date], order: DESC }\n      filter: {frontmatter: {pagetype: { eq: \"blog\" } } }\n    )\n    {\n\n    totalCount\n      nodes {\n        excerpt\n        fields {\n          slug\n        }\n        frontmatter {\n        title\n        date(formatString: \"YYYY.MM.DD\")\n        description\n        category\n        cateId\n        hero\n        tags\n        }\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<p><br>1ページに表示する記事の数は<code class=\"language-text\">$limit</code>、オフセット値は<code class=\"language-text\">$skip</code>に格納されるので、受け取った値を<code class=\"language-text\">allMarkdownRemark()</code>で絞り込みます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">allMarkdownRemark</span><span class=\"token punctuation\">(</span>\n  limit<span class=\"token operator\">:</span> $limit\n  skip<span class=\"token operator\">:</span> $skip\n  sort<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>frontmatter___date<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> order<span class=\"token operator\">:</span> <span class=\"token constant\">DESC</span> <span class=\"token punctuation\">}</span>\n  filter<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>frontmatter<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>pagetype<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> eq<span class=\"token operator\">:</span> <span class=\"token string\">\"blog\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p><br>createPageから投げられた値は引数<code class=\"language-text\">pageContext</code>に格納されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">blogs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ページネーションを出力するコンポーネントを作る\">ページネーションを出力するコンポーネントを作る</h3>\n<p>前と次へ移動する簡易的なページネーションの実装の仕方をご紹介します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 616px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.571428571428573%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzUlEQVQY02P4jwP8+/cPjLGJI9PogOHVmy//t+y98X/7gVv/N++58X/nwdv/f/78DVfw69fv/z9//gLTv3//RjFs3far/+evOvt/2YaL/xevPf8fZBZDbt2W/8q2ff8dwuf+13Ke9N/Md8b/N+++wg38+vX7/0+fvvz//v0n2GBkA0X12/4z8Jf8F9Zr/c/Anv8/sXjtf4aL157/P3H+8f/TF5/8P3n+8f/zV5/9//37L05vIYudOPfo/+7Dd/7vP3bv/65Dt/+fvfz0PwDuax4MpWhHBwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a5a03ba6b618ab1fb92d3d6122b36071/c54d4/entry413-1.webp 175w,\n/static/a5a03ba6b618ab1fb92d3d6122b36071/a3432/entry413-1.webp 350w,\n/static/a5a03ba6b618ab1fb92d3d6122b36071/26c8a/entry413-1.webp 616w\"\n              sizes=\"(max-width: 616px) 100vw, 616px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a5a03ba6b618ab1fb92d3d6122b36071/4edbd/entry413-1.png 175w,\n/static/a5a03ba6b618ab1fb92d3d6122b36071/13ae7/entry413-1.png 350w,\n/static/a5a03ba6b618ab1fb92d3d6122b36071/40040/entry413-1.png 616w\"\n            sizes=\"(max-width: 616px) 100vw, 616px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a5a03ba6b618ab1fb92d3d6122b36071/40040/entry413-1.png\"\n            alt=\"ページネーション\"\n            title=\"ページネーション\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>src/components/にpagination.jsを作成します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Prev</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> current<span class=\"token punctuation\">,</span> type <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token operator\">&lt;</span>li <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"pagination__prev not-work\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span>Newer<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n\t\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token operator\">&lt;</span>li <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"pagination__prev\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blogs/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Newer<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n\t\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token operator\">&lt;</span>li <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"pagination__prev\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blogs/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">page/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>current <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Newer<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n\t\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Next</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> num<span class=\"token punctuation\">,</span> current<span class=\"token punctuation\">,</span> type <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">===</span> num<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token operator\">&lt;</span>li <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"pagination__next not-work\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span>Older<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n\t\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\n\t\t\tcurrent <span class=\"token operator\">===</span> <span class=\"token string\">''</span> <span class=\"token operator\">?</span> <span class=\"token operator\">&lt;</span>li <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"pagination__next\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blogs/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">page/2/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Older<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span> <span class=\"token operator\">:</span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>li <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"pagination__next\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blogs/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">page/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>current <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Older<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n\t\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Pagination</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> num<span class=\"token punctuation\">,</span> current<span class=\"token punctuation\">,</span> type <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>ul <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"pagination\"</span><span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>Prev current<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>current<span class=\"token punctuation\">}</span> num<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>num<span class=\"token punctuation\">}</span> type<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>type<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\t\t\tpage <span class=\"token punctuation\">{</span>current<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token punctuation\">{</span>num<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token operator\">&lt;</span>Next current<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>current<span class=\"token punctuation\">}</span> num<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>num<span class=\"token punctuation\">}</span> type<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>type<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Pagination</code></pre></div>\n<p><br>あとは表示したいところにコードを追記してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">\n<span class=\"token comment\">// ~ 省略 ~</span>\n<span class=\"token keyword\">import</span> Pagination <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/blogList/pagination\"</span>\n<span class=\"token comment\">// ~ 省略 ~</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">blogs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageContext<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> current<span class=\"token punctuation\">,</span> page <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> pageContext\n\t<span class=\"token comment\">// ~ 省略 ~</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>Layout location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span> title<span class=\"token operator\">=</span><span class=\"token string\">\"銀ねこアトリエ\"</span><span class=\"token operator\">></span>\n\t\t\t<span class=\"token punctuation\">{</span><span class=\"token comment\">/* ~ 省略 ~*/</span><span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token operator\">&lt;</span>Pagination num<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>page<span class=\"token punctuation\">}</span> current<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>current<span class=\"token punctuation\">}</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\t\t\t<span class=\"token punctuation\">{</span><span class=\"token comment\">/* ~ 省略 ~*/</span><span class=\"token punctuation\">}</span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><br>カテゴリーやタグ一覧でもページネーションを実装したいときは<code class=\"language-text\">type</code>を追加してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Pagination num<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>page<span class=\"token punctuation\">}</span> current<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>current<span class=\"token punctuation\">}</span> type<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>tags<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"もっと複雑なページネーションを実装したい方へ\">もっと複雑なページネーションを実装したい方へ</h3>\n<p>記事数が多くなるとより詳細なページネーションが欲しいですよね。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACwElEQVQoz42Q72tTZxTH88/4ZjDBCb7ZQBDFOcVZFd8U+6bQ0rIhQ1dKO+moWlcVu1HFoSC6YatJf6auClrXDapYtaVLjUlMmuTe3FuTNLnNzf2R3Jubz7i3WN/I2BcO5/Cc53yfz3l8VavGUGCa38aeMPF3mMVkjpnZP0lLGYanJ+ju66XvygB9g5fp7T/P7/fuIkdCvAwGeBYc4emUnxl/gEf+cbSSim9NrXKka5Zv+1+w78w/tHec41DDYUbH/DR2tLFlx1Z2Hz3IF/v38Mn2T2loaiT0cJSRnlaCv17Hf3GIq6d/oP3YHsR0Al/JrHFlMsr4Hy+4en+BZ3MLzM0vomhlmnu+47Ovd9L+TRsdHV1s37mLprZmlmamGe7t5kb/IBdOXeLuj73cOdlCTkrjq1oWN++McWM4yOx8iFVZYu7pX+gVixM/nWZb4172HT1AY0srn391hPaTJxDmZwndHOD55BjzwQAPfv6Foe4zqPkcPsdxSMYTpBNJ8tk1ctlVJDGJYRjEkyu8Ci2xHH3DcuQ1b8LLpAURvVQgKybIyxnM0hpyRiK9ksK2rA1DQRCJRKLEYm9JCwKCKKLrOopS9IhlWUIUBOLxOJqmUSgWiUajSJKEJEvEYjESiQT1eh2fXXOQ3q0jygqpTBFNq/BeBaVMbk1FKelk8yWU9TL1ukNJ1UkJ7ygUVZR1A8Oo4IK58jlOnbJWRS1XKCgGllXzGu5rbq0bFpXqRrbsjSFVq5JZVTFMG8PcOHfve4R8RG7jv/R++GPyDAVpnaXwKq9jWSz7A6FtO8RTBaKJvBcrQpFURqFWczYNwrEccy/TXvYIKxWbU2cf0Pz9OC2dkyglc9PQXfPeVIjbI4vcCiww/jDM1OMIpmltGrZ2TrLjwDW+PH4bOavic9xB0/L+wqzYm6v8n7VduUBlveqFS/4vBY8+fv/VOfkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ad11b3c3b945e5a52391b180f713f742/c54d4/entry413-2.webp 175w,\n/static/ad11b3c3b945e5a52391b180f713f742/a3432/entry413-2.webp 350w,\n/static/ad11b3c3b945e5a52391b180f713f742/426ac/entry413-2.webp 700w,\n/static/ad11b3c3b945e5a52391b180f713f742/13f34/entry413-2.webp 993w\"\n              sizes=\"(max-width: 700px) 100vw, 700px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ad11b3c3b945e5a52391b180f713f742/4edbd/entry413-2.png 175w,\n/static/ad11b3c3b945e5a52391b180f713f742/13ae7/entry413-2.png 350w,\n/static/ad11b3c3b945e5a52391b180f713f742/8c557/entry413-2.png 700w,\n/static/ad11b3c3b945e5a52391b180f713f742/0f7d5/entry413-2.png 993w\"\n            sizes=\"(max-width: 700px) 100vw, 700px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ad11b3c3b945e5a52391b180f713f742/8c557/entry413-2.png\"\n            alt=\"ページネーション\"\n            title=\"ページネーション\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>詳細なページネーションのソースはGitHubにあげています。<br>\nめちゃくちゃコードが長くなったのでこの記事ではコードは紹介しません。</p>\n<p>こちらを参考にしてください。</p>\n<p><a href=\"https://github.com/yuririn/gatsby-theme/blob/master/src/components/blogList/pagination.js\">pagination.js | GitHub</a></p>\n<h2 id=\"なぜプラグインナシで実装したのか？\">なぜプラグインナシで実装したのか？</h2>\n<p>今回プラグインナシで実装した理由です。</p>\n<p>Gatsbyはプラグインが豊富でいくらでもプラグインで実装できます。プラグインがうまく動かず、やむなく勉強にもなるし自力で実装することにしました。</p>\n<p>後々よくコードを見てみたら<em>私の書き方が間違っていただけ</em>でした。<br>\nはじめて触るGatsbyに疲れていたのもありますが、人間が一番バグります。</p>\n<p>実装が面倒な人は<a href=\"https://www.gatsbyjs.com/plugins/gatsby-awesome-pagination/\">gatsby-awesome-pagination</a>あたりが人気なので、プラグインを利用するといいかもしません。</p>\n<h2 id=\"まとめ\">まとめ</h2>\n<p>ページネーションが実装され、安心してたくさん記事が書けるようになりました。</p>\n<p>次回「<em>Gatsbyブログサイト移行物語</em>」ではprivacypolicyなど、ループに含めたくないけどmdファイルで管理したいページの<a href=\"/blogs/entry416/\">実装方法をご紹介</a>（掲載済）します！</p>\n<p>皆さんのコーディングライフの一助となれば幸いです。</p>\n<p>最後までお読みいただきありがとうございました。</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E4%BB%8A%E3%81%BE%E3%81%A7%E3%81%AEgatsby%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A8%E6%B3%A8%E6%84%8F%E7%82%B9\">今までのGatsbyの記事と注意点</a></p>\n<ul>\n<li><a href=\"#%E3%81%93%E3%81%AE%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA%E3%81%A7%E3%81%AF%E3%83%86%E3%83%BC%E3%83%9Egatsby-starter-blog%E3%82%92%E6%94%B9%E9%80%A0\">このシリーズではテーマGatsby Starter Blogを改造</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E6%97%A9%E9%80%9F%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%97%E3%82%88%E3%81%86%EF%BC%81\">早速ページネーションを実装しよう！</a></p>\n<ul>\n<li><a href=\"#%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E5%88%86%E5%89%B2%E3%81%99%E3%82%8B\">ページネーションを実装するためにページを分割する</a></li>\n<li><a href=\"#pagesjs%E3%81%A7%E5%80%A4%E3%82%92%E5%8F%97%E3%81%91%E5%8F%96%E3%82%8B\">pages.jsで値を受け取る</a></li>\n<li><a href=\"#%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B\">ページネーションを出力するコンポーネントを作る</a></li>\n<li><a href=\"#%E3%82%82%E3%81%A3%E3%81%A8%E8%A4%87%E9%9B%91%E3%81%AA%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%9F%E3%81%84%E6%96%B9%E3%81%B8\">もっと複雑なページネーションを実装したい方へ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%AA%E3%81%9C%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%83%8A%E3%82%B7%E3%81%A7%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%9F%E3%81%AE%E3%81%8B%EF%BC%9F\">なぜプラグインナシで実装したのか？</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></p>\n</li>\n</ul>","frontmatter":{"title":"Gatsbyブログサイト移行物語5~プラグインナシで一覧にページネーション実装~","date":"2020.12.09","description":"記事数が増えると一覧にペーネーションが欲しくなりますよね？複数ページネーションを実装するためのプラグインがあるにもかかわらず自作して実装してしまいました。プラグインに頼らず実装したい人のために、やり方をシェアします。","lead":["記事数が増えると一覧にペーネーションが欲しくなりますよね？","複数ページネーションを実装するためのプラグインがあるにもかかわらず自作して実装してしまいました。","プラグインに頼らず実装したい人のために、やり方をシェアします。"],"hero":"2020/entry401.jpg","cateId":"web-developer","tags":["JavaScript","React","Gatsby"],"pagetype":"blog","modifieddate":"2021.01.12"}},"previous":{"fields":{"slug":"/blogs/entry412/"},"frontmatter":{"title":"本当に怖いDNS（ネームサーバー）変更。予想外のトラブルに備えよう！"}},"next":{"fields":{"slug":"/blogs/entry414/"},"frontmatter":{"title":"ベンチャーはやめとくべき？5社経験した私が事実を語ります"}}},"pageContext":{"id":"c42d7ea1-69ed-5ce7-9bb0-3f67cdf8a551","previousPostId":"7d655ebd-9f02-5cfc-bad6-05aba475573c","nextPostId":"37b61a4c-23b2-5445-b917-cee982d6220e","hero":"2020/entry401.jpg"}},"staticQueryHashes":["1145805751","2829560153","3000541721","3766793980"]}