{"componentChunkName":"component---src-templates-blog-post-js","path":"/blogs/entry459/","result":{"data":{"site":{"siteMetadata":{"title":"銀ねこアトリエ"}},"allFile":{"edges":[{"node":{"name":"entry459","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#b8c868","images":{"fallback":{"src":"/static/ec41a887eedc9aa38ac8bcc21039eb2c/88c96/entry459.jpg","srcSet":"/static/ec41a887eedc9aa38ac8bcc21039eb2c/15952/entry459.jpg 375w,\n/static/ec41a887eedc9aa38ac8bcc21039eb2c/cd750/entry459.jpg 750w,\n/static/ec41a887eedc9aa38ac8bcc21039eb2c/5caa2/entry459.jpg 1080w,\n/static/ec41a887eedc9aa38ac8bcc21039eb2c/88c96/entry459.jpg 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/ec41a887eedc9aa38ac8bcc21039eb2c/fd9fd/entry459.webp 375w,\n/static/ec41a887eedc9aa38ac8bcc21039eb2c/e56aa/entry459.webp 750w,\n/static/ec41a887eedc9aa38ac8bcc21039eb2c/257a3/entry459.webp 1080w,\n/static/ec41a887eedc9aa38ac8bcc21039eb2c/296b8/entry459.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":900}}}}]},"markdownRemark":{"id":"8cac36b7-1d01-5d68-81ed-5b4f881aea82","excerpt":"このブログの対象者 CMSなしでHTMLを量産しなければならない Pugと比べてみたい npm scriptやgulpが多少理解できる 10 ~ 30ページくらいの規模でページのレイアウト構成がある程違うことを想定しています。 EJSとは？  公式サイト:EJS Embedded JavaScript…","html":"<h2 id=\"このブログの対象者\">このブログの対象者</h2>\n<ul>\n<li>CMSなしでHTMLを量産しなければならない</li>\n<li>Pugと比べてみたい</li>\n<li>npm scriptやgulpが多少理解できる</li>\n</ul>\n<p>10 ~ 30ページくらいの規模でページのレイアウト構成がある程違うことを想定しています。</p>\n<h2 id=\"ejsとは？\">EJSとは？</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAME/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEE/9oADAMBAAIQAxAAAAHbOrKBP//EABcQAAMBAAAAAAAAAAAAAAAAAAABESD/2gAIAQEAAQUCFbj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAESAy/9oACAEBAAY/AjTn/8QAGRABAAIDAAAAAAAAAAAAAAAAAQAgMUFh/9oACAEBAAE/IXEOwDpX/9oADAMBAAIAAwAAABDIH//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxAcJ//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EBn/xAAaEAEAAQUAAAAAAAAAAAAAAAABEQAgMUGR/9oACAEBAAE/EAqBZTJRmugKdgt//9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5de607b619ffd97a3fb83a4d35f3f2a8/c54d4/entry459-1.webp 175w,\n/static/5de607b619ffd97a3fb83a4d35f3f2a8/a3432/entry459-1.webp 350w,\n/static/5de607b619ffd97a3fb83a4d35f3f2a8/426ac/entry459-1.webp 700w,\n/static/5de607b619ffd97a3fb83a4d35f3f2a8/d00b9/entry459-1.webp 800w\"\n              sizes=\"(max-width: 700px) 100vw, 700px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5de607b619ffd97a3fb83a4d35f3f2a8/e52aa/entry459-1.jpg 175w,\n/static/5de607b619ffd97a3fb83a4d35f3f2a8/70ebb/entry459-1.jpg 350w,\n/static/5de607b619ffd97a3fb83a4d35f3f2a8/29d31/entry459-1.jpg 700w,\n/static/5de607b619ffd97a3fb83a4d35f3f2a8/4b190/entry459-1.jpg 800w\"\n            sizes=\"(max-width: 700px) 100vw, 700px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5de607b619ffd97a3fb83a4d35f3f2a8/29d31/entry459-1.jpg\"\n            alt=\"EJS Embedded JavaScript templating.\"\n            title=\"EJS Embedded JavaScript templating.\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>公式サイト:<a href=\"https://ejs.co/\">EJS Embedded JavaScript templating</a></p>\n<blockquote>\n<p>Embedded JavaScript templating.<br>\n埋め込み型JavaScriptテンプレート</p>\n</blockquote>\n<h3 id=\"ejs6つの特徴\">EJS6つの特徴</h3>\n<ol>\n<li>プレーンなJSが使える</li>\n<li>開発に時間がかからない</li>\n<li>構文がシンプル</li>\n<li>早い</li>\n<li>デバックが簡単</li>\n<li>開発がアクティブ</li>\n</ol>\n<h3 id=\"pugとの比較\">Pugとの比較</h3>\n<table>\n<thead>\n<tr>\n<th>テンプレート</th>\n<th>メリット</th>\n<th>デメリット</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>Pug</em></td>\n<td>コードが短い</td>\n<td>ルールが独特<br>インデント間違えたら地獄</td>\n</tr>\n<tr>\n<td><em>EJS</em></td>\n<td>コードが長い</td>\n<td>JSライクに書ける<br>インデントを気にせず書ける</td>\n</tr>\n</tbody>\n</table>\n<p>私はコーダー、デザイナーにはPugがオススメ。コードが短くて済むからです。\n<br>コーディングが早く終わる。</p>\n<a class=\"article-link\" href=\"/blogs/entry428/\">\n<section><div class=\"article-link__img\"><img alt=\"pug（旧：Jade）を使い倒して時短マークアップしよう！\" src=\"/static/873c0ec016d781cc3b030cc97e638b86/f836f/entry428.jpg\" width=\"150\" height=\"113\" class=\"\"></div><div class=\"article-link__main\">\n<div class=\"article-link__main__title\">pug（旧：Jade）を使い倒して時短マークアップしよう！</div>\n<p class=\"description\">私はページを量産したりチームでサイトを作る時Pugという言語を使ってWebサイトを作って･･</p>\n<p>\n<time datetime=\"2021-01-10\">2021.01.10</time>\n</p>\n</div>\n</section></a>\n<h2 id=\"まずは基本の「き」から。gulpを使って導入する\">まずは基本の「き」から。Gulpを使って導入する</h2>\n<p>Gulpでの導入方法の紹介です。<br>\nまずはテキトーにプロジェクトを格納するフォルダーを作ります。<br>\nフォルダーをVS Codeなどのテキストエディターで開き、以下コマンドでpackage.jsonファイル作成。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm init -y</code></pre></div>\n<p>以下コマンドでまとめて、<code class=\"language-text\">gulp</code> <code class=\"language-text\">gulp-ejs</code> <code class=\"language-text\">gulp-rename</code> <code class=\"language-text\">plumber</code>をインストールします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i -D gulp gulp-ejs gulp-rename plumber</code></pre></div>\n<p>以下ディレクトリ構造を参考にしながらファイルやフォルダーを作成してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">プロジェクトフォルダ/\n  ├ package.json\n  │ gulpfile.js（作成・編集）\n  ├ src/（作成）\n  │  ├ data/（作成）\n  │  └ ejs/index.ejs\n  └ dist/（自動生成）</code></pre></div>\n<p><code class=\"language-text\">gulpfile.js</code>のコードを編集します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ejs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp-ejs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> rename <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp-rename\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> plumber <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp-plumber\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//エラーでビルドを中止させない</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> gulp\n    <span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"src/ejs/**/*.ejs\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">plumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">ejs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">rename</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> extname<span class=\"token operator\">:</span> <span class=\"token string\">\".html\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token function\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>EJSで文字列などをHTMLに出力する方法は以下。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 出力 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> 【出力内容】<span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>。</code></pre></div>\n<p><code class=\"language-text\">ejs</code>フォルダーに<code class=\"language-text\">index.ejs</code>（ejsの拡張子は.ejsです）を作成し、テキトーなhtmlコードを追加します 。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> <span class=\"token string\">'Hello, EJS'</span><span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span></code></pre></div>\n<p>以下コマンドでコンパイルします。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gulp ejs</code></pre></div>\n<p><code class=\"language-text\">dist</code>フォルダー内にindex.htmlが生成されます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.85714285714286%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB0KAB/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAMUAv/aAAgBAQABBQKXBMkmSf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQEBAQAAAAAAAAAAAAAAAAAyATH/2gAIAQEABj8C5iEP/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAFhkTGx0f/aAAgBAQABPyHPrfSJbIls/9oADAMBAAIAAwAAABDzz//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EEf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAABBQEAAAAAAAAAAAAAAAAAASExwfBB/9oACAEBAAE/EGETwvAaizcWf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a0bde8724a77f2b9d5e5f87221d87182/c54d4/entry459-2.webp 175w,\n/static/a0bde8724a77f2b9d5e5f87221d87182/a3432/entry459-2.webp 350w,\n/static/a0bde8724a77f2b9d5e5f87221d87182/7f61c/entry459-2.webp 400w\"\n              sizes=\"(max-width: 400px) 100vw, 400px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a0bde8724a77f2b9d5e5f87221d87182/e52aa/entry459-2.jpg 175w,\n/static/a0bde8724a77f2b9d5e5f87221d87182/70ebb/entry459-2.jpg 350w,\n/static/a0bde8724a77f2b9d5e5f87221d87182/066f9/entry459-2.jpg 400w\"\n            sizes=\"(max-width: 400px) 100vw, 400px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a0bde8724a77f2b9d5e5f87221d87182/066f9/entry459-2.jpg\"\n            alt=\"EJSでdistフォルダー内にindex.html生成\"\n            title=\"EJSでdistフォルダー内にindex.html生成\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h3 id=\"headerとfooterなどのファイルを分け、テンプレート化する\">headerとfooterなどのファイルを分け、テンプレート化する</h3>\n<p>それではテンプレート化してみましょう！<br>\n<code class=\"language-text\">ejs/_inc/</code>ディレクトリーに、<code class=\"language-text\">_header.ejs</code>と<code class=\"language-text\">_footer.ejs</code>を作ります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">プロジェクトフォルダ/\n  ├ package.json\n  │ gulpfile.js（修正）\n  ├ src/\n  │  ├ data/\n  │  └ ejs/index.ejs\n  │    └ _inc/\n  │      ├ _header.ejs（作成）\n  │      └ _header.ejs（作成）\n  └ dist/ index.html（自動生成）</code></pre></div>\n<p>Gulpのタスクを修正。接頭辞に<code class=\"language-text\">-（ハイフン）</code>がつくejsファイルはコンパイルから外します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">gulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> gulp\n    <span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"src/ejs/**/*.ejs\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"src/ejs/**/_*.ejs\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//修正</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">ejs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">rename</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> extname<span class=\"token operator\">:</span> <span class=\"token string\">\".html\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token function\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 変数 <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> 【変数名】 <span class=\"token operator\">=</span> 【変数の中身】<span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> ファイルのインクルード <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span> <span class=\"token function\">include</span><span class=\"token punctuation\">(</span>【相対パス＋ファイル名】<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> 【変数など値をインクロード先に渡す】 <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">index.ejs</code>の中身を書き換えます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> title <span class=\"token operator\">=</span> <span class=\"token string\">'トップページ'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> description <span class=\"token operator\">=</span> <span class=\"token string\">'ディスクリプション'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> pageId <span class=\"token operator\">=</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span> <span class=\"token function\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./_inc/_header'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> title<span class=\"token operator\">:</span> title<span class=\"token punctuation\">,</span> description<span class=\"token operator\">:</span> description<span class=\"token punctuation\">,</span> pageId<span class=\"token operator\">:</span> pageId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> <span class=\"token string\">'Hello, EJS'</span><span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span> <span class=\"token function\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./_inc/_footer'</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">%</span><span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">_header.js</code>でif文を使って、トップページの時はサイト名をh1タグ、それ以外はトップに戻れるように調整します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token constant\">DOCTYPE</span> html<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"ja\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta charset<span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"viewport\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"width=device-width, initial-scale=1.0\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"format-detection\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"telephone=no\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> title <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"description\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"&lt;%= description %>\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>link rel<span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span> href<span class=\"token operator\">=</span><span class=\"token string\">\"/assets/css/style.css\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>header<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pageId <span class=\"token operator\">===</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>サイトタイトル<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">></span>サイトタイトル<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>main<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">_footer.ejs</code>にもコンテンツを追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>main<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>footer<span class=\"token operator\">></span>\n  フッター\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>footer<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"ライブリロードとコードをキレイにするnodeモジュールを追加\">ライブリロードとコードをキレイにするnodeモジュールを追加</h3>\n<p><code class=\"language-text\">BrawserSync</code>と<code class=\"language-text\">gulp-html-beaitufy</code>でもっと作業しやすくします。</p>\n<p>コードが長くなってしまいましたので<code class=\"language-text\">gulpfile.js</code>のコードごっそり載せます！</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//ライブリロード</span>\n<span class=\"token keyword\">const</span> bs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"browser-sync\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> ejs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp-ejs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> rename <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp-rename\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> plumber <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp-plumber\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> htmlbeautify <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gulp-html-beautify\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bs-init\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  bs<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    server<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      baseDir<span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    reloadDelay<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token comment\">//リロードの遅延</span>\n    open<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//起動時のライブリロードを止める</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ファイルの監視</span>\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  gulp<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"src/ejs/**/*.ejs\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> gulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//追加</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> gulp\n    <span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"src/ejs/**/*.ejs\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"src/ejs/**/_*.ejs\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">plumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">ejs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">htmlbeautify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        indent_size<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//インデントサイズ</span>\n        indent_char<span class=\"token operator\">:</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// インデントに使う文字列はスペース1こ</span>\n        max_preserve_newlines<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 許容する連続改行数</span>\n        preserve_newlines<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//コンパイル前のコードの改行</span>\n        indent_inner_html<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//head,bodyをインデント</span>\n        extra_liners<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 終了タグの前に改行を入れるタグ。配列で指定。head,body,htmlにはデフォで改行を入れたくない場合は[]。</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">rename</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> extname<span class=\"token operator\">:</span> <span class=\"token string\">\".html\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token function\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>bs<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//追加</span>\n  <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n  gulp<span class=\"token punctuation\">.</span><span class=\"token function\">series</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token function\">parallel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> gulp<span class=\"token punctuation\">.</span><span class=\"token function\">parallel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bs-init\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>以下のコマンドで起動します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gulp</code></pre></div>\n<p>こちらが出力されたコードです。うん、美しい❤️\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHjRmyoP//EABUQAQEAAAAAAAAAAAAAAAAAACBB/9oACAEBAAEFAof/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAABEQAQITFB/9oACAEBAAE/IQjlEFuuC//aAAwDAQACAAMAAAAQ9N//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAACAgMBAAAAAAAAAAAAAAABEQAhEEFhkf/aAAgBAQABPxAAHAK3DcT2OMBzvuf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/361c09a2f48e66a80a52649376ec1748/c54d4/entry459-3.webp 175w,\n/static/361c09a2f48e66a80a52649376ec1748/a3432/entry459-3.webp 350w,\n/static/361c09a2f48e66a80a52649376ec1748/426ac/entry459-3.webp 700w,\n/static/361c09a2f48e66a80a52649376ec1748/d00b9/entry459-3.webp 800w\"\n              sizes=\"(max-width: 700px) 100vw, 700px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/361c09a2f48e66a80a52649376ec1748/e52aa/entry459-3.jpg 175w,\n/static/361c09a2f48e66a80a52649376ec1748/70ebb/entry459-3.jpg 350w,\n/static/361c09a2f48e66a80a52649376ec1748/29d31/entry459-3.jpg 700w,\n/static/361c09a2f48e66a80a52649376ec1748/4b190/entry459-3.jpg 800w\"\n            sizes=\"(max-width: 700px) 100vw, 700px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/361c09a2f48e66a80a52649376ec1748/29d31/entry459-3.jpg\"\n            alt=\"出力されたコードも美しい\"\n            title=\"出力されたコードも美しい\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"いよいよページ量産。jsonファイルを使ってコンテンツを管理する\">いよいよページ量産。jsonファイルを使ってコンテンツを管理する</h2>\n<p>EJSのいいところは、ファイル構造を保ったままコンパイルできます。</p>\n<p>データ管理するためにJSONデータを利用します。</p>\n<p>JSONデータをEJSで利用するために、node moduleの<code class=\"language-text\">fs</code>を追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i fs -D</code></pre></div>\n<p><code class=\"language-text\">gulpfile.js</code>にコードを追加してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//追加</span>\n\n<span class=\"token comment\">//省略</span>\n\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//ここから追加</span>\n  <span class=\"token keyword\">const</span> json_path <span class=\"token operator\">=</span> <span class=\"token string\">\"./src/data/site.json\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>json_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//ここまで追加</span>\n\n  <span class=\"token keyword\">return</span> gulp\n    <span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"src/ejs/**/*.ejs\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"!\"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"src/ejs/**/_*.ejs\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">//ここから追加</span>\n      <span class=\"token function\">ejs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        jsonData<span class=\"token operator\">:</span> json<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//ここまで追加</span>\n    <span class=\"token comment\">//省略</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token function\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>bs<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//省略</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">プロジェクトフォルダ/\n  ├ package.json\n  │ gulpfile.js\n  ├ src/\n  │  ├ data/\n  │  │  └ site.json（追加）\n  │  └ ejs/\n  │    ├ index.ejs\n  │    ├ contact/index.ejs（追加）\n  │    ├ about/index.ejs（追加）\n  │    ├ work/index.ejs（追加）\n  │    └ _inc/\n  │      ├ _header.ejs\n  │      └ _header.ejs\n  └ dist/\n     ├ index.html\n     ├ contact/index.html\n     ├ about/index.html\n     └ work/index.html</code></pre></div>\n<p><code class=\"language-text\">site.json</code>ファイルを作成しdada/内に追加。基本のサイト情報やページごとの設定を書いていきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"siteInfo\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"サイト名\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"siteUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"サイトのドメイン\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"pages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"home\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ホーム\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ページの説明\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//・・・・ページ分追記作成</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ちゃんとデータが取得できるか確認します。<br>\nindex.ejsの空きスペースに以下コードを仕込んでみてください。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>jsonData<span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">index.ejs</code>を修正します。<br>基本情報はJSONデータで管理するのでpageIdだけあればOKです。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> pageId <span class=\"token operator\">=</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span> <span class=\"token function\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./_inc/_header'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> pageId<span class=\"token operator\">:</span> pageId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n\nここにコンテンツ\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span> <span class=\"token function\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./_inc/_footer'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>pageId<span class=\"token operator\">:</span> pageId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">%</span><span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">_header.ejs</code>を修正します。<br>\nページタイトルはトップページの時のみサイト名を出力するようにしています。<br>\nページのメニューをforin文でループして書き出します。pageIdと項目名が一致する時は、リンクを外し、クラス<code class=\"language-text\">current</code>を付与しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> title <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>pageId <span class=\"token operator\">===</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> jsonData<span class=\"token punctuation\">.</span>siteInfo<span class=\"token punctuation\">.</span>name <span class=\"token operator\">:</span> jsonData<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">[</span>pageId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> jsonData<span class=\"token punctuation\">.</span>siteInfo<span class=\"token punctuation\">.</span>name<span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> description <span class=\"token operator\">=</span> jsonData<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">[</span>pageId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>description <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token constant\">DOCTYPE</span> html<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"ja\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta charset<span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"viewport\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"width=device-width, initial-scale=1.0\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"format-detection\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"telephone=no\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> title <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"description\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"&lt;%= description %>\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"description\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>link rel<span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span> href<span class=\"token operator\">=</span><span class=\"token string\">\"/assets/css/style.css\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>header<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pageId <span class=\"token operator\">===</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> jsonData<span class=\"token punctuation\">.</span>siteInfo<span class=\"token punctuation\">.</span>name <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> jsonData<span class=\"token punctuation\">.</span>siteInfo<span class=\"token punctuation\">.</span>name <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>nav<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> page <span class=\"token keyword\">in</span> jsonData<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>page <span class=\"token operator\">===</span> pageId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>li <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"current\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> jsonData<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"/&lt;%= page %>/\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> jsonData<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>nav<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>main<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">_footer.ejs</code>も似た感じで修正します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>main<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>footer<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>nav<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> page <span class=\"token keyword\">in</span> jsonData<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"/&lt;%= page %>/\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> jsonData<span class=\"token punctuation\">.</span>pages<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>nav<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>small<span class=\"token operator\">></span>（c）<span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> jsonData<span class=\"token punctuation\">.</span>siteInfo<span class=\"token punctuation\">.</span>name <span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>small<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>footer<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\n</code></pre></div>\n<p>work、about、contactなどのファイルを作成します。<br>\n階層が変わるので<em>インクルードファイルのパス</em>を間違わないように注意してください。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">let</span> pageId <span class=\"token operator\">=</span> <span class=\"token string\">'work'</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span> <span class=\"token function\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./../_inc/_header'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>pageId<span class=\"token operator\">:</span> pageId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> jsonData<span class=\"token punctuation\">.</span>siteInfo<span class=\"token punctuation\">.</span>name<span class=\"token operator\">%</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span><span class=\"token operator\">-</span> <span class=\"token function\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./../_inc/_footer'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>pageId<span class=\"token operator\">:</span> pageId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">%</span><span class=\"token operator\">></span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQGBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAUHsW1JgrA//xAAZEAADAQEBAAAAAAAAAAAAAAAAAQMEFDP/2gAIAQEAAQUCeqxotZPp0IZPzP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAhAyEjFBcZL/2gAIAQEABj8Cum4k1HC2fMN6j//EAB4QAAIBAwUAAAAAAAAAAAAAAAABMRARsSFBcaHw/9oACAEBAAE/IZ2CFtYNmm4UL24IHX4p/9oADAMBAAIAAwAAABDbL//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCtf//EAB8QAAIBAgcAAAAAAAAAAAAAAAERABAxIUFRYZGx8P/aAAgBAQABPxBlDs97iPZqpLIY5Qchg3ZHRPN0U//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c86e86166fecc03f56f81597b18e3faa/c54d4/entry459-4.webp 175w,\n/static/c86e86166fecc03f56f81597b18e3faa/a3432/entry459-4.webp 350w,\n/static/c86e86166fecc03f56f81597b18e3faa/e88ff/entry459-4.webp 600w\"\n              sizes=\"(max-width: 600px) 100vw, 600px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c86e86166fecc03f56f81597b18e3faa/e52aa/entry459-4.jpg 175w,\n/static/c86e86166fecc03f56f81597b18e3faa/70ebb/entry459-4.jpg 350w,\n/static/c86e86166fecc03f56f81597b18e3faa/b4294/entry459-4.jpg 600w\"\n            sizes=\"(max-width: 600px) 100vw, 600px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c86e86166fecc03f56f81597b18e3faa/b4294/entry459-4.jpg\"\n            alt=\"出力されたコードも美しい\"\n            title=\"出力されたコードも美しい\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2 id=\"ejsお役立ち情報おまけ\">EJSお役立ち情報おまけ</h2>\n<h3 id=\"ejs使い方\">EJS使い方</h3>\n<p>JSと使い方は一緒なので、特殊な書き方などだけ抜粋しておきます。</p>\n<table>\n<thead>\n<tr>\n<th>コード</th>\n<th>説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">&lt;% %></code></td>\n<td>この中にjsを書ける</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;%= %></code></td>\n<td>出力。エスケープする</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;%- %></code></td>\n<td>出力。エスケープしない</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;% let text = \"文字\" %></code></td>\n<td>変数。文字などを代入</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;%# コメント %></code></td>\n<td>htmlに出力されない。ここの中で変数宣言とかしても無効</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;% include _inc/_header %></code></td>\n<td>ファイルのインクルード</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">&lt;%- include('_inc/_header', {data: 'test'}) %></code></td>\n<td>ファイルのインクルード引数を渡すバージョン</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"vs-codeの設定\">VS Codeの設定</h3>\n<p>VS Codeの設定を変えて、さらに快適にコードを書きましょう！</p>\n<h4 id=\"emmetを使えるようにする\">Emmetを使えるようにする</h4>\n<p>EJSでもエメットを使えるようにしておきましょう。<br>\n設定から設定JSONを開き、“emmet.includeLanguages”に以下を追加します。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"emmet.includeLanguages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"ejs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"html\"</span><span class=\"token comment\">//これを追加。</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 省略</span></code></pre></div>\n<h4 id=\"拡張機能ejsを入れてシンタックスハイライターを使う\">拡張機能.ejsを入れてシンタックスハイライターを使う</h4>\n<p>慣れないと何で詰まってるかわからなくなります。<br>\n.ejsという拡張機能をVS Codeに入れておきましょう。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAYZCsg//xAAXEAEAAwAAAAAAAAAAAAAAAAACAxAR/9oACAEBAAEFApVpr//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAEiAxBB/9oACAEBAAY/Ao1AXL//xAAWEAEBAQAAAAAAAAAAAAAAAAAAAUH/2gAIAQEAAT8hyCwWq//aAAwDAQACAAMAAAAQ88//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMZGh/9oACAEBAAE/EAMLHaV2t8+suWwa5OsCf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/01efc12c62bafa025215a3855a2e1199/c54d4/entry459-5.webp 175w,\n/static/01efc12c62bafa025215a3855a2e1199/a3432/entry459-5.webp 350w,\n/static/01efc12c62bafa025215a3855a2e1199/e88ff/entry459-5.webp 600w\"\n              sizes=\"(max-width: 600px) 100vw, 600px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/01efc12c62bafa025215a3855a2e1199/e52aa/entry459-5.jpg 175w,\n/static/01efc12c62bafa025215a3855a2e1199/70ebb/entry459-5.jpg 350w,\n/static/01efc12c62bafa025215a3855a2e1199/b4294/entry459-5.jpg 600w\"\n            sizes=\"(max-width: 600px) 100vw, 600px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/01efc12c62bafa025215a3855a2e1199/b4294/entry459-5.jpg\"\n            alt=\"拡張機能.ejsを入れてシンタックスハイライターを使う\"\n            title=\"拡張機能.ejsを入れてシンタックスハイライターを使う\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>インストールしたら再起動しましょう。</p>\n<h2 id=\"まとめ・ejsはjsライクに書け、量産に向いている！\">まとめ・EJSはJSライクに書け、量産に向いている！</h2>\n<p>今回は10 ~ 20ページ程度で量産する方法をまとめました。<br>\nパンくずリストやコンバージョンエリアなどのインクルードファイルをさらに細かく分けたら、さらに保守性の高いサイトが作れそうですね！</p>\n<p>今の時代でも、セキュリティ上どうしてもHTMLの静的ファイルで作らないといけないこともあります。</p>\n<p>ページ数が多いと大変だけど、導入の敷居が、、、なんてこともありますが、EJSならさほど学習コストもかからない気がします！</p>\n<p>この記事が皆さんのコーディングライフの一助となれば幸いです。</p>\n<p>最後までお読みいただきありがとうございました。</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E3%81%93%E3%81%AE%E3%83%96%E3%83%AD%E3%82%B0%E3%81%AE%E5%AF%BE%E8%B1%A1%E8%80%85\">このブログの対象者</a></p>\n</li>\n<li>\n<p><a href=\"#ejs%E3%81%A8%E3%81%AF%EF%BC%9F\">EJSとは？</a></p>\n<ul>\n<li><a href=\"#ejs6%E3%81%A4%E3%81%AE%E7%89%B9%E5%BE%B4\">EJS6つの特徴</a></li>\n<li><a href=\"#pug%E3%81%A8%E3%81%AE%E6%AF%94%E8%BC%83\">Pugとの比較</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%BE%E3%81%9A%E3%81%AF%E5%9F%BA%E6%9C%AC%E3%81%AE%E3%80%8C%E3%81%8D%E3%80%8D%E3%81%8B%E3%82%89%E3%80%82gulp%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B\">まずは基本の「き」から。Gulpを使って導入する</a></p>\n<ul>\n<li><a href=\"#header%E3%81%A8footer%E3%81%AA%E3%81%A9%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%88%86%E3%81%91%E3%80%81%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E5%8C%96%E3%81%99%E3%82%8B\">headerとfooterなどのファイルを分け、テンプレート化する</a></li>\n<li><a href=\"#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%AA%E3%83%AD%E3%83%BC%E3%83%89%E3%81%A8%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%82%AD%E3%83%AC%E3%82%A4%E3%81%AB%E3%81%99%E3%82%8Bnode%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0\">ライブリロードとコードをキレイにするnodeモジュールを追加</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%84%E3%82%88%E3%81%84%E3%82%88%E3%83%9A%E3%83%BC%E3%82%B8%E9%87%8F%E7%94%A3%E3%80%82json%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B\">いよいよページ量産。jsonファイルを使ってコンテンツを管理する</a></p>\n</li>\n<li>\n<p><a href=\"#ejs%E3%81%8A%E5%BD%B9%E7%AB%8B%E3%81%A1%E6%83%85%E5%A0%B1%E3%81%8A%E3%81%BE%E3%81%91\">EJSお役立ち情報おまけ</a></p>\n<ul>\n<li>\n<p><a href=\"#ejs%E4%BD%BF%E3%81%84%E6%96%B9\">EJS使い方</a></p>\n</li>\n<li>\n<p><a href=\"#vs-code%E3%81%AE%E8%A8%AD%E5%AE%9A\">VS Codeの設定</a></p>\n<ul>\n<li><a href=\"#emmet%E3%82%92%E4%BD%BF%E3%81%88%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B\">Emmetを使えるようにする</a></li>\n<li><a href=\"#%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BDejs%E3%82%92%E5%85%A5%E3%82%8C%E3%81%A6%E3%82%B7%E3%83%B3%E3%82%BF%E3%83%83%E3%82%AF%E3%82%B9%E3%83%8F%E3%82%A4%E3%83%A9%E3%82%A4%E3%82%BF%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%86\">拡張機能.ejsを入れてシンタックスハイライターを使う</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E3%83%BBejs%E3%81%AFjs%E3%83%A9%E3%82%A4%E3%82%AF%E3%81%AB%E6%9B%B8%E3%81%91%E3%80%81%E9%87%8F%E7%94%A3%E3%81%AB%E5%90%91%E3%81%84%E3%81%A6%E3%81%84%E3%82%8B%EF%BC%81\">まとめ・EJSはJSライクに書け、量産に向いている！</a></p>\n</li>\n</ul>","frontmatter":{"title":"【Gulp】EJSを使ってHTMLを量産する","date":"2021.05.05","description":"最近GulpでEJSというテンプレートを使ってHTMLのファイルを量産しました。JavaScriptがそのまま書けるのでとても魅力的でした。もともと使っていたPugと比較しつつ、導入の仕方をご紹介いたします。","lead":["最近GulpでEJSというテンプレートを使ってHTMLのファイルを量産しました。","JavaScriptがそのまま書けるのでとても魅力的でした。もともと使っていたPugと比較しつつ、導入の仕方をご紹介いたします。"],"hero":"2021/entry459.jpg","cateId":"web-developer","tags":["JavaScript","npm"],"pagetype":"blog","modifieddate":null}},"previous":{"fields":{"slug":"/blogs/entry458/"},"frontmatter":{"title":"【2021年】WordPressに追加しておきたい機能（プラグイン）やテーマまとめ"}},"next":{"fields":{"slug":"/blogs/entry460/"},"frontmatter":{"title":"仕事が10倍楽しくなる！脱・初心者Slack活用入門"}}},"pageContext":{"id":"8cac36b7-1d01-5d68-81ed-5b4f881aea82","previousPostId":"c1032780-e085-5934-83e3-ed219d03903b","nextPostId":"5d40b38e-e5b5-5e8a-b021-e5719cadfa1c","hero":"2021/entry459.jpg"}},"staticQueryHashes":["1145805751","2829560153","3000541721","3766793980"]}